"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4547],{34547:function(e,t,a){a.r(t),a.d(t,{default:function(){return b}});var i=a(57437),s=a(2265),d=a(78796),n=a(70996),l=a(61507),r=a(6314),o=a(93088),c=a(95171),h=a(40748),g=a(10883),u=a(32191),_=a(4964),p=a(58055),m=a(25810),x=a(99376),v=a(80605),w=a(88520);function b(e){let{initialData:t}=e,a=(0,x.useRouter)(),{data:b}=(0,v.useSession)(),j=(0,d.p)(),[y,k]=(0,s.useState)(!1),[N,I]=(0,s.useState)(null),[f,S]=(0,s.useState)(t||{id:"",title:"",description:"",ad_type:"banner",placement_type:"header",width:0,height:0,status:"active",device_type:"both",ad_network:"google_adsense",schedule:{start_date:new Date().toISOString().split("T")[0],end_date:new Date().toISOString().split("T")[0]},created_at:"",updated_at:""});(0,s.useEffect)(()=>{t&&S({...t,schedule:{start_date:new Date(t.schedule.start_date).toISOString().split("T")[0],end_date:new Date(t.schedule.end_date).toISOString().split("T")[0]}})},[t]);let C=e=>{let{name:t,value:a}=e.target;"start_date"===t||"end_date"===t?S(e=>({...e,schedule:{...e.schedule,[t]:a}})):"width"===t||"height"===t?S(e=>({...e,[t]:Number(a)})):S(e=>({...e,[t]:a}))},A=async e=>{var i;if(e.preventDefault(),!(null==b?void 0:null===(i=b.user)||void 0===i?void 0:i.access_token)){I("Authentication required");return}k(!0),I(null);try{let e;let{id:i,created_at:s,updated_at:d,...n}=f,l={...n,schedule:{start_date:new Date(f.schedule.start_date).toISOString(),end_date:new Date(f.schedule.end_date).toISOString()}};e=t?await w.m.update(t.id,l,b.user.access_token):await w.m.create(l,b.user.access_token),200===e.status||201===e.status?(j({title:t?"Placement Ad Updated":"Placement Ad Created",description:t?"The placement ad has been successfully updated.":"A new placement ad has been successfully created.",status:"success",duration:3e3,isClosable:!0}),a.push("/dashboard/ads/placement-ads")):I(e.message||"Operation failed")}catch(e){console.error("Error submitting form:",e),I("Failed to save placement ad")}finally{k(!1)}};return(0,i.jsxs)("div",{className:"px-4 pt-6",children:[(0,i.jsx)("div",{className:"grid items-center justify-between grid-cols-2",children:(0,i.jsx)("div",{className:"flex items-center mb-4 lg:mb-0",children:(0,i.jsx)("h3",{className:"mb-2 text-xl font-bold text-gray-900 dark:text-white",children:t?"Edit Placement Ad":"New Placement Ad"})})}),(0,i.jsxs)(n.xu,{p:6,bg:"white",borderWidth:"1px",borderRadius:"lg",shadow:"md",className:"dark:bg-gray-800 dark:border-gray-700",children:[N&&(0,i.jsxs)(l.b,{status:"error",mb:4,children:[(0,i.jsx)(r.z,{}),N]}),(0,i.jsx)("form",{onSubmit:A,children:(0,i.jsxs)(o.K,{spacing:4,children:[(0,i.jsxs)(c.NI,{id:"title",isRequired:!0,children:[(0,i.jsx)(h.l,{children:"Title"}),(0,i.jsx)(g.I,{name:"title",value:f.title,onChange:C,placeholder:"e.g., Homepage Top Banner",bg:"white",className:"dark:bg-gray-700 dark:text-white"})]}),(0,i.jsxs)(c.NI,{id:"description",children:[(0,i.jsx)(h.l,{children:"Description"}),(0,i.jsx)(u.g,{name:"description",value:f.description,onChange:C,placeholder:"Brief description of the ad placement",bg:"white",className:"dark:bg-gray-700 dark:text-white"})]}),(0,i.jsxs)(c.NI,{id:"ad_type",isRequired:!0,children:[(0,i.jsx)(h.l,{children:"Ad Type"}),(0,i.jsxs)(_.P,{name:"ad_type",value:f.ad_type,onChange:C,bg:"white",className:"dark:bg-gray-700 dark:text-white",children:[(0,i.jsx)("option",{value:"banner",children:"Banner"}),(0,i.jsx)("option",{value:"native",children:"Native"}),(0,i.jsx)("option",{value:"video",children:"Video"}),(0,i.jsx)("option",{value:"popup",children:"Popup"}),(0,i.jsx)("option",{value:"interstitial",children:"Interstitial"})]})]}),(0,i.jsxs)(c.NI,{id:"placement_type",isRequired:!0,children:[(0,i.jsx)(h.l,{children:"Placement Type"}),(0,i.jsxs)(_.P,{name:"placement_type",value:f.placement_type,onChange:C,bg:"white",className:"dark:bg-gray-700 dark:text-white",children:[(0,i.jsx)("option",{value:"header",children:"Header"}),(0,i.jsx)("option",{value:"sidebar",children:"Sidebar"}),(0,i.jsx)("option",{value:"footer",children:"Footer"}),(0,i.jsx)("option",{value:"content",children:"Content"}),(0,i.jsx)("option",{value:"floating",children:"Floating"})]})]}),(0,i.jsxs)(c.NI,{id:"position_name",children:[(0,i.jsx)(h.l,{children:"Position Name (e.g., MR1, Leaderboard)"}),(0,i.jsx)(g.I,{name:"position_name",value:f.position_name||"",onChange:C,placeholder:"e.g., MR1, Leaderboard",bg:"white",className:"dark:bg-gray-700 dark:text-white"})]}),(0,i.jsxs)(c.NI,{id:"device_type",isRequired:!0,children:[(0,i.jsx)(h.l,{children:"Device Type"}),(0,i.jsxs)(_.P,{name:"device_type",value:f.device_type,onChange:C,bg:"white",className:"dark:bg-gray-700 dark:text-white",children:[(0,i.jsx)("option",{value:"both",children:"Both"}),(0,i.jsx)("option",{value:"mobile",children:"Mobile"}),(0,i.jsx)("option",{value:"desktop",children:"Desktop"})]})]}),(0,i.jsxs)(p.U,{spacing:4,children:[(0,i.jsxs)(c.NI,{id:"width",children:[(0,i.jsx)(h.l,{children:"Width (px)"}),(0,i.jsx)(g.I,{type:"number",name:"width",value:0===f.width?"":f.width,onChange:C,placeholder:"e.g., 300",bg:"white",className:"dark:bg-gray-700 dark:text-white"})]}),(0,i.jsxs)(c.NI,{id:"height",children:[(0,i.jsx)(h.l,{children:"Height (px)"}),(0,i.jsx)(g.I,{type:"number",name:"height",value:0===f.height?"":f.height,onChange:C,placeholder:"e.g., 250",bg:"white",className:"dark:bg-gray-700 dark:text-white"})]})]}),(0,i.jsxs)(c.NI,{id:"status",isRequired:!0,children:[(0,i.jsx)(h.l,{children:"Status"}),(0,i.jsxs)(_.P,{name:"status",value:f.status,onChange:C,bg:"white",className:"dark:bg-gray-700 dark:text-white",children:[(0,i.jsx)("option",{value:"active",children:"Active"}),(0,i.jsx)("option",{value:"inactive",children:"Inactive"}),(0,i.jsx)("option",{value:"scheduled",children:"Scheduled"})]})]}),(0,i.jsxs)(c.NI,{id:"ad_network",isRequired:!0,children:[(0,i.jsx)(h.l,{children:"Ad Network"}),(0,i.jsxs)(_.P,{name:"ad_network",value:f.ad_network,onChange:C,bg:"white",className:"dark:bg-gray-700 dark:text-white",children:[(0,i.jsx)("option",{value:"google_adsense",children:"Google AdSense"}),(0,i.jsx)("option",{value:"google_ad_manager",children:"Google Ad Manager"}),(0,i.jsx)("option",{value:"mgid",children:"MGID"}),(0,i.jsx)("option",{value:"outbrain",children:"Outbrain"}),(0,i.jsx)("option",{value:"custom",children:"Custom"})]})]}),"google_adsense"===f.ad_network&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(c.NI,{id:"google_ad_client",isRequired:!0,children:[(0,i.jsx)(h.l,{children:"Google Ad Client (data-ad-client)"}),(0,i.jsx)(g.I,{name:"google_ad_client",value:f.google_ad_client||"",onChange:C,placeholder:"e.g., ca-pub-XXXXXXXXXXXXXXXX",bg:"white",className:"dark:bg-gray-700 dark:text-white"})]}),(0,i.jsxs)(c.NI,{id:"google_ad_slot",isRequired:!0,children:[(0,i.jsx)(h.l,{children:"Google Ad Slot (data-ad-slot)"}),(0,i.jsx)(g.I,{name:"google_ad_slot",value:f.google_ad_slot||"",onChange:C,placeholder:"e.g., XXXXXXXXXX",bg:"white",className:"dark:bg-gray-700 dark:text-white"})]})]}),"google_ad_manager"===f.ad_network&&(0,i.jsxs)(c.NI,{id:"google_ad_unit_path",isRequired:!0,children:[(0,i.jsx)(h.l,{children:"Google Ad Unit Path"}),(0,i.jsx)(g.I,{name:"google_ad_unit_path",value:f.google_ad_unit_path||"",onChange:C,placeholder:"e.g., /89929222/Uzone.id_Mobile/Homepage",bg:"white",className:"dark:bg-gray-700 dark:text-white"})]}),"mgid"===f.ad_network&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(c.NI,{id:"mgid_widget_id",isRequired:!0,children:[(0,i.jsx)(h.l,{children:"MGID Widget ID"}),(0,i.jsx)(g.I,{name:"mgid_widget_id",value:f.mgid_widget_id||"",onChange:C,placeholder:"e.g., 1576567",bg:"white",className:"dark:bg-gray-700 dark:text-white"})]}),(0,i.jsxs)(c.NI,{id:"mgid_container_id",isRequired:!0,children:[(0,i.jsx)(h.l,{children:"MGID Container ID"}),(0,i.jsx)(g.I,{name:"mgid_container_id",value:f.mgid_container_id||"",onChange:C,placeholder:"e.g., M646462ScriptRootC1576567",bg:"white",className:"dark:bg-gray-700 dark:text-white"})]})]}),"outbrain"===f.ad_network&&(0,i.jsxs)(c.NI,{id:"outbrain_widget_id",isRequired:!0,children:[(0,i.jsx)(h.l,{children:"Outbrain Widget ID"}),(0,i.jsx)(g.I,{name:"outbrain_widget_id",value:f.outbrain_widget_id||"",onChange:C,placeholder:"e.g., SL_DT_SB",bg:"white",className:"dark:bg-gray-700 dark:text-white"})]}),"custom"===f.ad_network&&(0,i.jsxs)(c.NI,{id:"custom_params",children:[(0,i.jsx)(h.l,{children:"Custom Parameters (JSON)"}),(0,i.jsx)(u.g,{name:"custom_params",value:JSON.stringify(f.custom_params,null,2),onChange:e=>{try{S(t=>({...t,custom_params:JSON.parse(e.target.value)}))}catch(e){console.error("Invalid JSON for custom parameters",e)}},placeholder:'{\\n  "key": "value"\\n}',rows:5,bg:"white",className:"dark:bg-gray-700 dark:text-white"})]}),(0,i.jsxs)(c.NI,{id:"start_date",children:[(0,i.jsx)(h.l,{children:"Schedule Start Date"}),(0,i.jsx)(g.I,{type:"date",name:"start_date",value:f.schedule.start_date,onChange:C,bg:"white",className:"dark:bg-gray-700 dark:text-white"})]}),(0,i.jsxs)(c.NI,{id:"end_date",children:[(0,i.jsx)(h.l,{children:"Schedule End Date"}),(0,i.jsx)(g.I,{type:"date",name:"end_date",value:f.schedule.end_date,onChange:C,bg:"white",className:"dark:bg-gray-700 dark:text-white"})]}),(0,i.jsxs)(p.U,{spacing:4,justifyContent:"flex-end",children:[(0,i.jsx)(m.z,{variant:"outline",onClick:()=>a.back(),disabled:y,children:"Cancel"}),(0,i.jsx)(m.z,{colorScheme:"teal",type:"submit",isLoading:y,loadingText:t?"Updating...":"Creating...",disabled:y,children:t?"Update Placement Ad":"Create Placement Ad"})]})]})})]})]})}},88520:function(e,t,a){a.d(t,{m:function(){return s}});var i=a(89427);class s{static getAuthHeaders(e){return{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}static async create(e,t){var a;let s=await (0,i.Z)("POST","".concat(this.baseUrl,"api/v1/ads-placement/create"),{title:e.title,description:e.description,ad_type:e.ad_type,placement_type:e.placement_type,position_name:e.position_name,device_type:e.device_type,width:e.width,height:e.height,status:e.status,ad_network:e.ad_network,ad_config:{google_ad_client:e.google_ad_client,google_ad_slot:e.google_ad_slot,google_ad_unit_path:e.google_ad_unit_path,mgid_widget_id:e.mgid_widget_id,mgid_container_id:e.mgid_container_id,outbrain_widget_id:e.outbrain_widget_id,custom_params:e.custom_params},schedule:e.schedule},this.getAuthHeaders(t));return{data:s.data,message:null===(a=s.data)||void 0===a?void 0:a.message,status:s.status}}static async get(){var e,t;let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0,d={placement_id:a.placement_id,skip:a.skip||0,limit:a.limit||10},n=await (0,i.Z)("GET","".concat(this.baseUrl,"api/v1/ads-placement/get"),d,this.getAuthHeaders(s));return{data:(null===(e=n.data)||void 0===e?void 0:e.data)||[],message:null===(t=n.data)||void 0===t?void 0:t.message,status:n.status}}static async getById(e,t){var a,s;let d=await (0,i.Z)("GET","".concat(this.baseUrl,"api/v1/ads-placement/get"),{placement_id:e},this.getAuthHeaders(t));return{data:(null===(a=d.data)||void 0===a?void 0:a.data)||null,message:null===(s=d.data)||void 0===s?void 0:s.message,status:d.status}}static async update(e,t,a){var s;let d=await (0,i.Z)("PUT","".concat(this.baseUrl,"api/v1/ads-placement/update?placement_id=").concat(e),{title:t.title,description:t.description,ad_type:t.ad_type,placement_type:t.placement_type,position_name:t.position_name,device_type:t.device_type,width:t.width,height:t.height,status:t.status,ad_network:t.ad_network,ad_config:{google_ad_client:t.google_ad_client,google_ad_slot:t.google_ad_slot,google_ad_unit_path:t.google_ad_unit_path,mgid_widget_id:t.mgid_widget_id,mgid_container_id:t.mgid_container_id,outbrain_widget_id:t.outbrain_widget_id,custom_params:t.custom_params},schedule:t.schedule},this.getAuthHeaders(a));return{data:d.data,message:null===(s=d.data)||void 0===s?void 0:s.message,status:d.status}}static async updateStatus(e,t){var a;let s=await (0,i.Z)("PUT","".concat(this.baseUrl,"api/v1/ads-placement/update-status?placement_id=").concat(e.placement_id,"&status=").concat(e.status),{},this.getAuthHeaders(t));return{data:s.data,message:null===(a=s.data)||void 0===a?void 0:a.message,status:s.status}}static async delete(e,t){var a;let s=await (0,i.Z)("DELETE","".concat(this.baseUrl,"api/v1/ads-placement/delete?placement_id=").concat(e),{},this.getAuthHeaders(t));return{data:s.data,message:null===(a=s.data)||void 0===a?void 0:a.message,status:s.status}}static async bulkCreate(e,t){let a=[],i=[];for(let s of e)try{let e=await this.create(s,t);200===e.status||201===e.status?a.push({title:s.title,status:"success",data:e.data}):i.push({title:s.title,status:"error",message:e.message||"Failed to create"})}catch(e){i.push({title:s.title,status:"error",message:"Network error or unexpected failure"})}return{data:{successful:a,failed:i,summary:{total:e.length,successful:a.length,failed:i.length}},status:0===i.length?200:207,message:"Bulk operation completed: ".concat(a.length," successful, ").concat(i.length," failed")}}}s.baseUrl="https://api_cms_uzone.satudev.net/"},89427:function(e,t,a){a.d(t,{Z:function(){return s}});var i=a(83464);async function s(e,t,a,s){try{let d;let n={"User-Agent":"UZone-CMS-Client/1.0 (+https://uzone.id)",...s};return s&&(s["User-Agent"]||s["user-agent"])&&(delete n["User-Agent"],n["User-Agent"]=s["User-Agent"]||s["user-agent"]),d="GET"==e?{validateStatus:()=>!1,method:e,headers:n,url:t,params:a}:{validateStatus:()=>!1,method:e,headers:n,url:t,data:a},await (0,i.Z)(d).catch(e=>e.response)}catch(e){return{data:e,status:500,statusText:"Internal Server Error",headers:{},config:{}}}}}}]);
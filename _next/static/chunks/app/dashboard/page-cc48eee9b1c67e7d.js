(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7702],{6739:function(e,t,a){Promise.resolve().then(a.t.bind(a,65878,23)),Promise.resolve().then(a.bind(a,81523)),Promise.resolve().then(a.bind(a,70049)),Promise.resolve().then(a.bind(a,83639))},83639:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return v}});var s=a(57437),r=a(2265),i=a(307),o=a(89427),l=a(16098),n=a(80605),c=a(57228),d=a(25922);function m(e){let{dateRange:t,isUpdate:a}=e,[m,u]=r.useState(!0),[p,y]=r.useState([]),{data:h}=(0,n.useSession)(),{theme:f}=(0,d.F)(),x="dark"===f?"#fff":"#000";r.useEffect(()=>{let e=async()=>{var e;u(!0);let a=await (0,o.Z)("POST","".concat("https://mercury.uzone.id/","api/v1/reports/user_activities"),{start_date:(0,l.Z)(t[0]).format("YYYY-MM-DD"),end_date:(0,l.Z)(t[1]).format("YYYY-MM-DD"),user_ids:[]},{accept:"application/json",Authorization:"Bearer ".concat(null==h?void 0:null===(e=h.user)||void 0===e?void 0:e.access_token)});u(!1),200===a.status&&y(a.data)};h&&a&&2===t.length&&e()},[h,a]),[...Array.from(new Set(p.flatMap(e=>e.activities.map(e=>e.activity_date))))].sort((e,t)=>new Date(e).getTime()-new Date(t).getTime());let g=p.map(e=>{let t=e.activities.reduce((e,t)=>({created:e.created+t.created_posts,published:e.published+t.published_posts,sameDay:e.sameDay+t.created_and_published_same_day}),{created:0,published:0,sameDay:0});return{name:"".concat(e.first_name," ").concat(e.last_name),...t}}),v={title:{text:"User Performance Overview ".concat((0,l.Z)().format("MMMM YYYY")),left:"center",textStyle:{color:x}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["Created","Published","Same Day"],top:"30",textStyle:{color:x}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"value",axisLabel:{color:x}},yAxis:{type:"category",data:g.map(e=>e.name),axisLabel:{width:100,overflow:"truncate",color:x}},series:[{name:"Created",type:"bar",data:g.map(e=>e.created),itemStyle:{color:"#5470c6"}},{name:"Published",type:"bar",data:g.map(e=>e.published),itemStyle:{color:"#91cc75"}},{name:"Same Day",type:"bar",data:g.map(e=>e.sameDay),itemStyle:{color:"#fac858"}}]};return(0,s.jsx)("div",{className:"w-full space-y-8",children:m?(0,s.jsx)(i.E,{size:"xs",isIndeterminate:!0}):(0,s.jsx)("div",{className:"w-full h-[400px]",children:(0,s.jsx)(c.Z,{option:v,style:{height:"100%",width:"100%"},opts:{renderer:"svg"}})})})}function u(e){let{dateRange:t,isUpdate:a}=e,[m,u]=r.useState(!0),[p,y]=r.useState({kanal_summary:[],articles:{},total_articles:0}),{theme:h}=(0,d.F)(),{data:f}=(0,n.useSession)(),x="dark"===h?"#fff":"#000",g=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30;return e.replace(/-/g," ").substring(0,t)+(e.length>t?"...":"")},v=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=p.articles[e]||[];return Array.isArray(a)?(a.length>0?null==a?void 0:a.toSorted((e,t)=>t.total_count-e.total_count):[]).slice(0,t):[]},b={title:{text:"Channel Summary: Articles and Total Views",left:"center",textStyle:{color:x}},tooltip:{trigger:"axis",axisPointer:{type:"cross"}},legend:{data:["Total Articles","Total Views"],top:30,textStyle:{color:x}},grid:{left:"3%",right:"4%",bottom:"10%",containLabel:!0},xAxis:{type:"category",data:p.kanal_summary.map(e=>e.kanal),axisLabel:{color:x}},yAxis:[{type:"value",name:"Total Articles",position:"left",axisLine:{show:!0,lineStyle:{color:"#5470C6"}},axisLabel:{color:x}},{type:"value",name:"Total Views",position:"right",axisLine:{show:!0,lineStyle:{color:"#91CC75"}},axisLabel:{color:x}}],series:[{name:"Total Articles",type:"bar",data:p.kanal_summary.map(e=>e.total_articles),yAxisIndex:0,itemStyle:{color:"#5470C6"}},{name:"Total Views",type:"line",data:p.kanal_summary.map(e=>e.total_count),yAxisIndex:1,itemStyle:{color:"#91CC75"}}]},_={title:{text:"Top 10 Gadget Articles by Total Views",left:"center",textStyle:{color:x}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"10%",containLabel:!0},xAxis:{type:"category",data:v("Gadget").map(e=>g(e.slug)),axisLabel:{rotate:45,interval:0,color:x}},yAxis:{type:"value",name:"Total Views",axisLabel:{color:x}},series:[{name:"Views",type:"bar",data:v("Gadget").map(e=>e.total_count),itemStyle:{color:"#3398DB"}}]};return r.useEffect(()=>{let e=async()=>{var e;u(!0);let a=await (0,o.Z)("POST","".concat("https://mercury.uzone.id/","api/v1/articles/kanal-count"),{start_date:(0,l.Z)(t[0]).format("YYYY-MM-DD"),end_date:(0,l.Z)(t[1]).format("YYYY-MM-DD"),categories:["games","automotive","gadget","telco"],sort_by:["total_count"],sort_order:"desc"},{accept:"application/json",Authorization:"Bearer ".concat(null==f?void 0:null===(e=f.user)||void 0===e?void 0:e.access_token)});200===a.status&&y(a.data.data),u(!1)};f&&a&&2===t.length&&e()},[f,a]),(0,s.jsx)("div",{className:"w-full mt-16 space-y-8",children:m?(0,s.jsx)(i.E,{size:"xs",className:"my-5",isIndeterminate:!0}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"w-full h-[500px]",children:(0,s.jsx)(c.Z,{option:b,style:{height:"100%",width:"100%"},opts:{renderer:"svg"}})}),(0,s.jsx)("div",{className:"w-full h-[500px]",children:(0,s.jsx)(c.Z,{option:_,style:{height:"100%",width:"100%"},opts:{renderer:"svg"}})})]})})}function p(e){let{dateRange:t,isUpdate:a}=e,[i,m]=r.useState([]),{data:u}=(0,n.useSession)(),{theme:p}=(0,d.F)(),y="dark"===p?"#fff":"#000";r.useEffect(()=>{let e=async()=>{var e;let a=await (0,o.Z)("POST","".concat("https://mercury.uzone.id/","api/v1/reports/user_activities"),{start_date:(0,l.Z)(t[0]).format("YYYY-MM-DD"),end_date:(0,l.Z)(t[1]).format("YYYY-MM-DD"),user_ids:[]},{accept:"application/json",Authorization:"Bearer ".concat(null==u?void 0:null===(e=u.user)||void 0===e?void 0:e.access_token)});200===a.status&&m(a.data)};u&&a&&2===t.length&&e()},[u,a]);let h=[...Array.from(new Set(i.flatMap(e=>e.activities.map(e=>e.activity_date))))].sort((e,t)=>new Date(e).getTime()-new Date(t).getTime()).map(e=>{let t=i.flatMap(t=>t.activities.filter(t=>t.activity_date===e));return{date:e,dayOfMonth:(0,l.Z)(e).format("DD MMM"),created:t.reduce((e,t)=>e+t.created_posts,0),published:t.reduce((e,t)=>e+t.published_posts,0),sameDay:t.reduce((e,t)=>e+t.created_and_published_same_day,0)}}),f={title:{text:"Daily Posts Activity Overview ".concat((0,l.Z)().format("MMMM YYYY")),left:"center",textStyle:{color:y}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:e=>{let t=h[e[0].dataIndex].date,a="<strong>".concat((0,l.Z)(t).format("DD MMMM YYYY"),"</strong><br/>");return e.forEach(e=>{a+="".concat(e.seriesName,": ").concat(e.value,"<br/>")}),a}},legend:{data:["Created Posts","Published Posts","Same Day Posts"],top:"30",textStyle:{color:y}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",data:h.map(e=>e.dayOfMonth),name:"Day",nameLocation:"middle",nameGap:18,nameTextStyle:{fontSize:14,fontWeight:"bold",color:y},axisLabel:{rotate:0,formatter:e=>e,color:y}},yAxis:{type:"value",name:"Number of Posts",nameLocation:"middle",nameGap:40,nameTextStyle:{color:y},axisLabel:{color:y}},series:[{name:"Created Posts",type:"bar",data:h.map(e=>e.created),itemStyle:{color:"#5470c6"}},{name:"Published Posts",type:"bar",data:h.map(e=>e.published),itemStyle:{color:"#91cc75"}},{name:"Same Day Posts",type:"line",data:h.map(e=>e.sameDay),itemStyle:{color:"#fac858"}}]};return(0,s.jsx)("div",{className:"w-full space-y-8",children:(0,s.jsx)("div",{className:"w-full h-[450px]",children:(0,s.jsx)(c.Z,{option:f,style:{height:"100%",width:"100%"},opts:{renderer:"svg"}})})})}var y=a(85994),h=a.n(y),f=a(25810);a(21005);var x=a(71096),g=a.n(x);function v(){let[e,t]=r.useState([g()().startOf("month").toDate(),g()().toDate()]),[a,i]=e,[o,l]=r.useState(1);return(0,s.jsxs)("div",{className:"px-4 pt-6",children:[(0,s.jsxs)("div",{className:"grid items-center justify-between grid-cols-1 lg:grid-cols-2",children:[(0,s.jsx)("div",{className:"flex items-center mb-4 lg:mb-0",children:(0,s.jsx)("h3",{className:"mb-2 text-xl font-bold text-gray-900 dark:text-white",children:"Dashboard"})}),(0,s.jsxs)("div",{className:"flex justify-end mb-4 lg:justify-end",children:[(0,s.jsx)(h(),{className:"bg-white dark:bg-gray-800",selectsRange:!0,startDate:a,endDate:i,dateFormat:"dd-MM-yyyy",onChange:e=>{t(e)},isClearable:!0}),(0,s.jsx)(f.z,{ml:4,my:"auto",onClick:()=>l(Math.floor(1e4*Math.random())),colorScheme:"blue",children:"Submit"})]})]}),(0,s.jsxs)("div",{className:"p-4 bg-white border border-gray-200 rounded-lg shadow-sm dark:border-gray-700 sm:p-6 dark:bg-gray-800",children:[(0,s.jsx)(m,{dateRange:e,isUpdate:o}),(0,s.jsx)(u,{dateRange:e,isUpdate:o}),(0,s.jsx)(p,{dateRange:e,isUpdate:o})]})]})}},16098:function(e,t,a){"use strict";var s=a(71096),r=a.n(s);r()().format("HH:mm"),t.Z=r()},89427:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});var s=a(83464);async function r(e,t,a,r){try{let i;return i="GET"==e?{validateStatus:()=>!1,method:e,headers:r,url:t,params:a}:{validateStatus:()=>!1,method:e,headers:r,url:t,data:a},await (0,s.Z)(i).catch(e=>e.response)}catch(e){return{data:e,status:500,statusText:"Internal Server Error",headers:{},config:{}}}}}},function(e){e.O(0,[7360,1544,9439,5878,605,3464,9614,3622,2971,2117,1744],function(){return e(e.s=6739)}),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7003],{76817:function(e,t,n){Promise.resolve().then(n.t.bind(n,65878,23)),Promise.resolve().then(n.bind(n,81523)),Promise.resolve().then(n.bind(n,70049)),Promise.resolve().then(n.bind(n,35505))},35505:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var a=n(57437),i=n(2265),o=n(80605),d=n(70996),l=n(72760),s=n(61507),c=n(6314),r=n(88520),_=n(34547);function u(e){var t;let{placementId:n}=e,{data:u}=(0,o.useSession)(),[g,v]=(0,i.useState)(null),[p,h]=(0,i.useState)(!0),[m,f]=(0,i.useState)(null);return((0,i.useEffect)(()=>{var e;let t=async()=>{var e,t,a,i,o,d,l,s;if(!(null==u?void 0:null===(e=u.user)||void 0===e?void 0:e.access_token)){f("Authentication required"),h(!1);return}try{console.log("Fetching placement ad with ID:",n);let e=await r.m.getById(n,u.user.access_token);if(console.log("API Response:",e),200===e.status&&e.data){let n=e.data,c=n.data||n;console.log("Placement Data:",c);let r={id:c._id,title:c.title,description:c.description||"",ad_type:c.ad_type||"banner",placement_type:c.placement_type||"content",width:c.width||0,height:c.height||0,status:c.status,device_type:c.device_type,position_name:c.position_name,ad_network:c.ad_network,schedule:{start_date:c.schedule_start_at||new Date().toISOString(),end_date:c.schedule_end_at||new Date(Date.now()+31536e6).toISOString()},created_at:c.created_at,updated_at:c.updated_at,google_ad_client:null===(t=c.ad_config)||void 0===t?void 0:t.google_ad_client,google_ad_slot:null===(a=c.ad_config)||void 0===a?void 0:a.google_ad_slot,google_ad_unit_path:null===(i=c.ad_config)||void 0===i?void 0:i.google_ad_unit_path,mgid_widget_id:null===(o=c.ad_config)||void 0===o?void 0:o.mgid_widget_id,mgid_container_id:null===(d=c.ad_config)||void 0===d?void 0:d.mgid_container_id,outbrain_widget_id:null===(l=c.ad_config)||void 0===l?void 0:l.outbrain_widget_id,custom_params:null===(s=c.ad_config)||void 0===s?void 0:s.custom_params};console.log("Transformed Data:",r),v(r)}else f(e.message||"Placement ad not found")}catch(e){console.error("Error fetching placement ad:",e),f("Failed to fetch placement ad")}finally{h(!1)}};(null==u?void 0:null===(e=u.user)||void 0===e?void 0:e.access_token)&&t()},[n,null==u?void 0:null===(t=u.user)||void 0===t?void 0:t.access_token]),p)?(0,a.jsx)("div",{className:"px-4 pt-6",children:(0,a.jsx)(d.xu,{display:"flex",justifyContent:"center",alignItems:"center",height:"400px",children:(0,a.jsx)(l.$,{size:"xl",color:"teal.500"})})}):m?(0,a.jsx)("div",{className:"px-4 pt-6",children:(0,a.jsxs)(s.b,{status:"error",children:[(0,a.jsx)(c.z,{}),m]})}):g?(console.log("Rendering form with placement ad:",g),(0,a.jsx)(_.default,{initialData:g})):(console.log("No placement ad data available"),(0,a.jsx)("div",{className:"px-4 pt-6",children:(0,a.jsxs)(s.b,{status:"warning",children:[(0,a.jsx)(c.z,{}),"Placement ad not found"]})}))}}},function(e){e.O(0,[9439,2434,5878,7201,1760,3314,5337,4547,2971,2117,1744],function(){return e(e.s=76817)}),_N_E=e.O()}]);
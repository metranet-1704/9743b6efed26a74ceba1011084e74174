(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6059],{42480:function(){},93074:function(e,t,a){Promise.resolve().then(a.t.bind(a,65878,23)),Promise.resolve().then(a.bind(a,81523)),Promise.resolve().then(a.bind(a,70049)),Promise.resolve().then(a.bind(a,60546))},81523:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return i}});let s=a(18993);function i(e){let{reason:t,children:a}=e;if("undefined"==typeof window)throw new s.BailoutToCSRError(t);return a}},70049:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadCss",{enumerable:!0,get:function(){return d}});let s=a(57437),i=a(20544);function d(e){let{moduleIds:t}=e;if("undefined"!=typeof window)return null;let a=(0,i.getExpectedRequestStore)("next/dynamic css"),d=[];if(a.reactLoadableManifest&&t){let e=a.reactLoadableManifest;for(let a of t){if(!e[a])continue;let t=e[a].files.filter(e=>e.endsWith(".css"));d.push(...t)}}return 0===d.length?null:(0,s.jsx)(s.Fragment,{children:d.map(e=>(0,s.jsx)("link",{precedence:"dynamic",rel:"stylesheet",href:a.assetPrefix+"/_next/"+encodeURI(e),as:"style"},e))})}},60546:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return E}});var s=a(57437),i=a(2265),d=a(71594),n=a(24525),r=a(69340),l=a(72499),o=a(58055),c=a(60187),u=a(25730),p=a(307),h=a(67776),m=a(99376),g=a(80605),_=a(25103),x=a.n(_),y=a(43118),b=a(88520),v=a(78796),f=a(26553),w=a(48860),k=a(49270),j=a(16152),N=a(20517),C=a(25810);let S=[{id:"pa-001",title:"Homepage Leaderboard (GAM Desktop)",description:"Primary leaderboard ad for desktop homepage.",ad_type:"banner",placement_type:"header",width:970,height:250,status:"active",device_type:"desktop",position_name:"Leaderboard",ad_network:"google_ad_manager",google_ad_unit_path:"/89929222/Uzone.id_Desktop/Homepage",schedule:{start_date:"2023-01-01T00:00:00Z",end_date:"2025-12-31T23:59:59Z"},created_at:"2023-01-01T10:00:00Z",updated_at:"2024-07-20T15:30:00Z"},{id:"pa-002",title:"Homepage Leaderboard (GAM Mobile)",description:"Primary leaderboard ad for mobile homepage.",ad_type:"banner",placement_type:"header",width:320,height:100,status:"active",device_type:"mobile",position_name:"Leaderboard",ad_network:"google_ad_manager",google_ad_unit_path:"/89929222/Uzone.id_Mobile/Homepage",schedule:{start_date:"2023-01-01T00:00:00Z",end_date:"2025-12-31T23:59:59Z"},created_at:"2023-01-01T10:00:00Z",updated_at:"2024-07-20T15:30:00Z"},{id:"pa-003",title:"Article Content AdSense (MR1)",description:"AdSense ad unit within article content, middle right 1.",ad_type:"banner",placement_type:"content",width:300,height:250,status:"active",device_type:"both",position_name:"MR1",ad_network:"google_adsense",google_ad_client:"ca-pub-5732039957356757",google_ad_slot:"1122334455",schedule:{start_date:"2023-03-15T00:00:00Z",end_date:"2025-12-31T23:59:59Z"},created_at:"2023-03-15T11:00:00Z",updated_at:"2024-07-22T09:15:00Z"},{id:"pa-004",title:"Sidebar Native Ad (MGID)",description:"Native ad unit for sidebar on article pages, via MGID.",ad_type:"native",placement_type:"sidebar",width:300,height:600,status:"active",device_type:"both",position_name:"Sidebar Top",ad_network:"mgid",mgid_widget_id:"1576567",mgid_container_id:"M646462ScriptRootC1576567",schedule:{start_date:"2023-03-15T00:00:00Z",end_date:"2025-12-31T23:59:59Z"},created_at:"2023-03-15T11:00:00Z",updated_at:"2024-07-22T09:15:00Z"},{id:"pa-005",title:"Article Recommendation (Outbrain)",description:"Content recommendation widget at the end of articles.",ad_type:"native",placement_type:"footer",width:0,height:0,status:"active",device_type:"both",position_name:"Article Bottom",ad_network:"outbrain",outbrain_widget_id:"SL_DT_SB",schedule:{start_date:"2024-01-01T00:00:00Z",end_date:"2025-12-31T23:59:59Z"},created_at:"2024-01-01T12:00:00Z",updated_at:"2024-07-01T08:00:00Z"},{id:"pa-006",title:"Custom Popup Ad",description:"A custom-managed popup ad for special promotions.",ad_type:"popup",placement_type:"floating",width:600,height:400,status:"scheduled",device_type:"desktop",position_name:"Promo Popup",ad_network:"custom",custom_params:{modal_id:"promo-modal-xyz",trigger_event:"page_load"},schedule:{start_date:"2025-08-01T00:00:00Z",end_date:"2025-08-15T23:59:59Z"},created_at:"2024-07-10T14:00:00Z",updated_at:"2024-07-10T14:00:00Z"}];function T(e){let{isOpen:t,onClose:a,idToDelete:d,title:n,setIsUpdate:r}=e,l=i.useRef(null),o=(0,v.p)();return(0,s.jsx)(f.a,{isOpen:t,leastDestructiveRef:l,onClose:a,children:(0,s.jsx)(w.Z,{children:(0,s.jsxs)(f._,{children:[(0,s.jsx)(k.x,{fontSize:"lg",fontWeight:"bold",children:"Delete Placement Ad"}),(0,s.jsxs)(j.f,{children:['Are you sure you want to delete "',n,"\"? You can't undo this action."]}),(0,s.jsxs)(N.m,{children:[(0,s.jsx)(C.z,{ref:l,onClick:a,children:"Cancel"}),(0,s.jsx)(C.z,{colorScheme:"red",onClick:()=>{let e=S.length,t=S.filter(e=>e.id!==d);S.length=0,S.push(...t),S.length<e?(o({title:"Placement Ad Deleted.",description:'"'.concat(n,'" has been deleted.'),status:"success",duration:3e3,isClosable:!0}),r(e=>e+1)):o({title:"Deletion Failed.",description:"Could not delete the placement ad.",status:"error",duration:3e3,isClosable:!0}),a()},ml:3,children:"Delete"})]})]})})})}function A(e){var t,a;let{search:_}=e,v=(0,m.useRouter)(),{data:f}=(0,g.useSession)(),[w,k]=i.useState(0),[j,N]=i.useState([]),[C,S]=i.useState(!0),[A,Z]=i.useState(0),[P,L]=i.useState(0),[D,U]=i.useState(""),[E,M]=i.useState(""),[z,R]=i.useState(null),{isOpen:I,onOpen:H,onClose:O}=(0,r.q)(),F=(0,i.useMemo)(()=>_?j.filter(e=>{var t;return e.title.toLowerCase().includes(_.toLowerCase())||e.description.toLowerCase().includes(_.toLowerCase())||e.ad_network.toLowerCase().includes(_.toLowerCase())||(null===(t=e.position_name)||void 0===t?void 0:t.toLowerCase().includes(_.toLowerCase()))}):j,[j,_]),B=F.length,G=[{header:"Title",accessorKey:"title"},{header:"Ad Network",accessorKey:"ad_network"},{header:"Position Name",accessorKey:"position_name"},{header:"Device Type",accessorKey:"device_type"},{header:"Dimensions",accessorFn:e=>"".concat(e.width,"x").concat(e.height),id:"dimensions"},{header:"Status",accessorKey:"status",cell:e=>{let{row:t}=e,a=t.original.status,i="gray";switch(a.toLowerCase()){case"active":i="green";break;case"inactive":i="red";break;case"scheduled":i="blue";break;default:i="gray"}return(0,s.jsx)(l.C,{colorScheme:i,variant:"solid",children:a.charAt(0).toUpperCase()+a.slice(1)})}},{header:"Schedule",accessorFn:e=>{if(!e.schedule||!e.schedule.start_date||!e.schedule.end_date)return"No schedule";try{let t=new Date(e.schedule.start_date),a=new Date(e.schedule.end_date);if(isNaN(t.getTime())||isNaN(a.getTime()))return"Invalid Date";return"".concat(t.toLocaleDateString()," - ").concat(a.toLocaleDateString())}catch(e){return"Invalid Date"}},id:"schedule"},{header:"Action",id:"action",size:100,minSize:100,cell:e=>{let{row:t}=e,{id:a,title:i}=t.original;return(0,s.jsxs)(o.U,{spacing:"2",children:[(0,s.jsx)(c.u,{label:"Edit","aria-label":"Edit tooltip",children:(0,s.jsx)(u.h,{size:"sm",icon:(0,s.jsx)(h.FNg,{className:"w-4 h-4"}),"aria-label":"Edit Placement Ad",colorScheme:"blue",onClick:()=>v.push("/dashboard/ads/placement-ads/edit/".concat((0,y.P)(a)))})}),(0,s.jsx)(c.u,{label:"Delete","aria-label":"Delete tooltip",children:(0,s.jsx)(u.h,{size:"sm",icon:(0,s.jsx)(h.v_0,{className:"w-4 h-4"}),"aria-label":"Delete Placement Ad",colorScheme:"red",onClick:()=>{U(a),M(i),H()}})})]})}}],K=(0,d.b7)({data:F,columns:G,getCoreRowModel:(0,n.sC)(),manualPagination:!1,pageCount:Math.ceil(B/10)}),W=i.useCallback(async()=>{var e;if(null==f?void 0:null===(e=f.user)||void 0===e?void 0:e.access_token){S(!0),R(null);try{let e=await b.m.get({skip:10*A,limit:10},f.user.access_token);if(200===e.status){let t=e.data,a=(null==t?void 0:t.items)||[],s=(null==t?void 0:t.total)||a.length,i=a.map(e=>({id:e._id,title:e.title,description:e.description||"",ad_type:e.ad_type||"banner",placement_type:e.placement_type||"content",width:e.dimension?parseInt(e.dimension.split("x")[0]):0,height:e.dimension?parseInt(e.dimension.split("x")[1]):0,status:e.status,device_type:e.device_type,position_name:e.position_name,ad_network:e.ad_network,schedule:e.schedule?(()=>{try{let t=e.schedule.split(" - ");if(2===t.length)return{start_date:t[0].replace(" ","T")+"Z",end_date:t[1].replace(" ","T")+"Z"};return null}catch(e){return null}})():null,created_at:e.created_at,updated_at:e.updated_at}));N(i),L(s)}else R(e.message||"Failed to fetch placement ads")}catch(e){R("Failed to fetch placement ads"),console.error("Error fetching placement ads:",e)}finally{S(!1)}}},[null==f?void 0:null===(t=f.user)||void 0===t?void 0:t.access_token,A]);return i.useEffect(()=>{W()},[W]),i.useEffect(()=>{w>0&&(async()=>{var e;if((null==f?void 0:null===(e=f.user)||void 0===e?void 0:e.access_token)&&D){try{let e=await b.m.delete(D,f.user.access_token);200===e.status?await W():R(e.message||"Failed to delete placement ad")}catch(e){R("Failed to delete placement ad"),console.error("Error deleting placement ad:",e)}k(0),U(""),M("")}})()},[w,D,null==f?void 0:null===(a=f.user)||void 0===a?void 0:a.access_token,W]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(T,{setIsUpdate:k,isOpen:I,idToDelete:D,title:E,onClose:O}),(0,s.jsx)("div",{className:"mt-5 overflow-x-auto text-xs bg-white border border-gray-200 divide-y divide-gray-200 rounded-lg shadow-md dark:bg-gray-700",children:(0,s.jsxs)("table",{className:"w-full table-auto",style:{minWidth:"1000px"},children:[(0,s.jsx)("thead",{className:"bg-white dark:bg-gray-800",children:K.getHeaderGroups().map(e=>(0,s.jsx)("tr",{className:"text-xs font-semibold tracking-wider text-left text-gray-500 uppercase dark:text-white",children:e.headers.map(e=>(0,s.jsx)("th",{className:"px-3 py-2 text-left",style:{width:"action"===e.id?"120px":"auto",minWidth:(e.id,"120px")},children:e.isPlaceholder?null:(0,d.ie)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,s.jsxs)("tbody",{className:"bg-white divide-y divide-gray-200 dark:bg-gray-700",children:[C?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:G.length,className:"px-6 py-2 text-center text-gray-500",children:(0,s.jsx)(p.E,{colorScheme:"teal",size:"xs",isIndeterminate:!0})})}):z?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:G.length,className:"px-6 py-4 text-center text-red-500",children:z})}):0===F.length?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:G.length,className:"px-6 py-2 text-center text-gray-500",children:_?"No matching placement ads found":"No placement ads available"})}):K.getRowModel().rows.map(e=>(0,s.jsx)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-600",children:e.getVisibleCells().map(e=>(0,s.jsx)("td",{className:"px-3 py-2 whitespace-nowrap",style:{width:"action"===e.column.id?"120px":"auto",minWidth:(e.column.id,"120px")},children:(0,d.ie)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)),z&&(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:G.length,className:"px-6 py-2 text-center",children:(0,s.jsx)("button",{onClick:W,className:"px-4 py-2 text-sm bg-teal-500 text-white rounded hover:bg-teal-600",children:"Retry"})})})]})]})}),(0,s.jsxs)("div",{className:"flex justify-between items-center mt-4 text-sm text-gray-600 dark:text-gray-300",children:[(0,s.jsxs)("div",{children:["Showing ",F.length," of ",_?j.length:P," placement ads",_&&" (filtered)"]}),!_&&P>10&&(0,s.jsxs)("div",{children:["Page ",A+1]})]}),!_&&P>10&&(0,s.jsx)(x(),{previousLabel:"Previous",nextLabel:"Next",breakLabel:"...",pageCount:Math.ceil(P/10),marginPagesDisplayed:1,pageRangeDisplayed:3,onPageChange:e=>{Z(e.selected)},forcePage:A,containerClassName:"flex justify-end items-center mt-4",pageClassName:"mx-1",pageLinkClassName:"px-3 py-2 border rounded-md text-sm text-gray-700 dark:text-white hover:bg-gray-200",previousLinkClassName:"px-3 py-2 ml-0 leading-tight text-gray-700 bg-white dark:text-white dark:bg-gray-700 rounded-l-md border border-gray-300 text-sm hover:bg-gray-200",nextLinkClassName:"px-3 py-2 leading-tight text-sm text-gray-700 bg-white dark:text-white dark:bg-gray-700 rounded-r-md border border-gray-300 hover:bg-gray-200",breakClassName:"mx-1",breakLinkClassName:"px-3 py-2 border rounded-md text-sm text-gray-700 dark:text-white",activeLinkClassName:"bg-blue-500 text-white",disabledClassName:"opacity-50 cursor-not-allowed",renderOnZeroPageCount:null})]})}var Z=a(12125),P=a(10883),L=a(68193),D=a(49089),U=a(27648);function E(){let[e,t]=i.useState("");return(0,s.jsxs)("div",{className:"px-4 pt-6",children:[(0,s.jsx)("div",{className:"grid items-center justify-between grid-cols-2",children:(0,s.jsx)("div",{className:"flex items-center mb-4 lg:mb-0",children:(0,s.jsx)("h3",{className:"mb-2 text-xl font-bold text-gray-900 dark:text-white",children:"Placement Ads"})})}),(0,s.jsxs)("div",{className:"p-4 mb-5 bg-white border border-gray-200 rounded-lg shadow-sm dark:border-gray-700 sm:p-6 dark:bg-gray-800",children:[(0,s.jsxs)("div",{className:"items-center justify-between lg:flex",children:[(0,s.jsx)("div",{className:"flex items-center mb-4 space-x-2 lg:mb-0",children:(0,s.jsx)(U.default,{href:"/dashboard/ads/placement-ads/new",children:(0,s.jsx)(C.z,{colorScheme:"teal",children:"Add New"})})}),(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)("div",{className:"m-2",children:(0,s.jsx)("div",{className:"max-w-md mx-auto",children:(0,s.jsx)("div",{className:"relative",children:(0,s.jsxs)(Z.B,{size:"md",children:[(0,s.jsx)(P.I,{pr:"4rem",type:"text",bg:"white",placeholder:"Search placement ads",onChange:e=>t(e.target.value),className:"dark:bg-gray-700 dark:text-white"}),(0,s.jsx)(L.x,{children:(0,s.jsx)(C.z,{size:"sm",children:(0,s.jsx)(D.U41,{className:"text-black dark:text-gray-700"})})})]})})})})})]}),(0,s.jsx)(A,{search:e})]})]})}},88520:function(e,t,a){"use strict";a.d(t,{m:function(){return i}});var s=a(89427);class i{static getAuthHeaders(e){return{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}static async create(e,t){var a;let i=await (0,s.Z)("POST","".concat(this.baseUrl,"api/v1/ads-placement/create"),{title:e.title,description:e.description,ad_type:e.ad_type,placement_type:e.placement_type,position_name:e.position_name,device_type:e.device_type,width:e.width,height:e.height,status:e.status,ad_network:e.ad_network,ad_config:{google_ad_client:e.google_ad_client,google_ad_slot:e.google_ad_slot,google_ad_unit_path:e.google_ad_unit_path,mgid_widget_id:e.mgid_widget_id,mgid_container_id:e.mgid_container_id,outbrain_widget_id:e.outbrain_widget_id,custom_params:e.custom_params},schedule:e.schedule},this.getAuthHeaders(t));return{data:i.data,message:null===(a=i.data)||void 0===a?void 0:a.message,status:i.status}}static async get(){var e,t;let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0,d={placement_id:a.placement_id,skip:a.skip||0,limit:a.limit||10},n=await (0,s.Z)("GET","".concat(this.baseUrl,"api/v1/ads-placement/get"),d,this.getAuthHeaders(i));return{data:(null===(e=n.data)||void 0===e?void 0:e.data)||[],message:null===(t=n.data)||void 0===t?void 0:t.message,status:n.status}}static async getById(e,t){var a,i;let d=await (0,s.Z)("GET","".concat(this.baseUrl,"api/v1/ads-placement/get"),{placement_id:e},this.getAuthHeaders(t));return{data:(null===(a=d.data)||void 0===a?void 0:a.data)||null,message:null===(i=d.data)||void 0===i?void 0:i.message,status:d.status}}static async update(e,t,a){var i;let d=await (0,s.Z)("PUT","".concat(this.baseUrl,"api/v1/ads-placement/update?placement_id=").concat(e),{title:t.title,description:t.description,ad_type:t.ad_type,placement_type:t.placement_type,position_name:t.position_name,device_type:t.device_type,width:t.width,height:t.height,status:t.status,ad_network:t.ad_network,ad_config:{google_ad_client:t.google_ad_client,google_ad_slot:t.google_ad_slot,google_ad_unit_path:t.google_ad_unit_path,mgid_widget_id:t.mgid_widget_id,mgid_container_id:t.mgid_container_id,outbrain_widget_id:t.outbrain_widget_id,custom_params:t.custom_params},schedule:t.schedule},this.getAuthHeaders(a));return{data:d.data,message:null===(i=d.data)||void 0===i?void 0:i.message,status:d.status}}static async updateStatus(e,t){var a;let i=await (0,s.Z)("PUT","".concat(this.baseUrl,"api/v1/ads-placement/update-status?placement_id=").concat(e.placement_id,"&status=").concat(e.status),{},this.getAuthHeaders(t));return{data:i.data,message:null===(a=i.data)||void 0===a?void 0:a.message,status:i.status}}static async delete(e,t){var a;let i=await (0,s.Z)("DELETE","".concat(this.baseUrl,"api/v1/ads-placement/delete?placement_id=").concat(e),{},this.getAuthHeaders(t));return{data:i.data,message:null===(a=i.data)||void 0===a?void 0:a.message,status:i.status}}static async bulkCreate(e,t){let a=[],s=[];for(let i of e)try{let e=await this.create(i,t);200===e.status||201===e.status?a.push({title:i.title,status:"success",data:e.data}):s.push({title:i.title,status:"error",message:e.message||"Failed to create"})}catch(e){s.push({title:i.title,status:"error",message:"Network error or unexpected failure"})}return{data:{successful:a,failed:s,summary:{total:e.length,successful:a.length,failed:s.length}},status:0===s.length?200:207,message:"Bulk operation completed: ".concat(a.length," successful, ").concat(s.length," failed")}}}i.baseUrl="https://api_cms_uzone.satudev.net/"},43118:function(e,t,a){"use strict";a.d(t,{A:function(){return n},P:function(){return d}});var s=a(80928),i=a.n(s);function d(e){return encodeURIComponent(i().AES.encrypt(e.toString(),"c2c9cfa669c5a7fd065c694e3c112f1aec09401e895ad77f72255158b9847d58").toString())}function n(e){return i().AES.decrypt(decodeURIComponent(e),"c2c9cfa669c5a7fd065c694e3c112f1aec09401e895ad77f72255158b9847d58").toString(i().enc.Utf8)}},89427:function(e,t,a){"use strict";a.d(t,{Z:function(){return i}});var s=a(83464);async function i(e,t,a,i){try{let d;let n={"User-Agent":"UZone-CMS-Client/1.0 (+https://uzone.id)",...i};return i&&(i["User-Agent"]||i["user-agent"])&&(delete n["User-Agent"],n["User-Agent"]=i["User-Agent"]||i["user-agent"]),d="GET"==e?{validateStatus:()=>!1,method:e,headers:n,url:t,params:a}:{validateStatus:()=>!1,method:e,headers:n,url:t,data:a},await (0,s.Z)(d).catch(e=>e.response)}catch(e){return{data:e,status:500,statusText:"Internal Server Error",headers:{},config:{}}}}},58055:function(e,t,a){"use strict";a.d(t,{U:function(){return n}});var s=a(93088),i=a(68973),d=a(57437),n=(0,i.G)((e,t)=>(0,d.jsx)(s.K,{align:"center",...e,direction:"row",ref:t}));n.displayName="HStack"},72499:function(e,t,a){"use strict";a.d(t,{C:function(){return o}});var s=a(68973),i=a(9889),d=a(83707),n=a(41531),r=a(14096),l=a(57437),o=(0,s.G)(function(e,t){let a=(0,i.mq)("Badge",e),{className:s,...o}=(0,d.Lr)(e);return(0,l.jsx)(n.m.span,{ref:t,className:(0,r.cx)("chakra-badge",e.className),...o,__css:{display:"inline-block",whiteSpace:"nowrap",verticalAlign:"middle",...a}})});o.displayName="Badge"},78796:function(e,t,a){"use strict";a.d(t,{p:function(){return r}});var s=a(81760),i=a(66923),d=a(68494),n=a(2265);function r(e){let{theme:t}=(0,d.uP)(),a=(0,s.OX)();return(0,n.useMemo)(()=>(0,i.Cj)(t.direction,{...a,...e}),[e,t.direction,a])}}},function(e){e.O(0,[7699,1994,9439,2434,5878,7201,1760,3314,9611,6448,4959,920,7648,2971,2117,1744],function(){return e(e.s=93074)}),_N_E=e.O()}]);
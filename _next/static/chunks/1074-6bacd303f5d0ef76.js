"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1074],{1074:function(e,o,i){i.r(o),i.d(o,{default:function(){return ev}});var A=i(57437),t=i(2265),a=i(29501);class s{async makeRequest(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",i=arguments.length>2?arguments[2]:void 0;try{let A={method:o,headers:{"Content-Type":"application/json"}};i&&"GET"!==o&&(A.body=JSON.stringify(i));let t=await fetch("/api/media".concat(e),A),a=await t.json();if(!t.ok)return{success:!1,error:a.error||"API request failed",code:a.code};return a}catch(o){return console.error("API Error (".concat(e,"):"),o),{success:!1,error:"Network error"}}}async listObjects(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,A=new URLSearchParams({prefix:e,delimiter:o,maxKeys:i.toString()});return this.makeRequest("/list?".concat(A))}async uploadFile(e,o,i,A,t){try{let a=new FormData;a.append("file",e),a.append("path",o),i&&a.append("customName",i),t&&a.append("exifDate",t);let s=new XMLHttpRequest;return new Promise(e=>{s.upload.addEventListener("progress",e=>{if(e.lengthComputable&&A){let o=Math.round(100*e.loaded/e.total);A(o)}}),s.addEventListener("load",()=>{let o=null;try{o=JSON.parse(s.responseText||"{}")}catch(e){o={}}if(!(s.status>=200&&s.status<300)){e({success:!1,error:(null==o?void 0:o.error)||"Upload failed",status:s.status,data:o});return}if(o&&"object"==typeof o){var i;e({success:null===(i=o.success)||void 0===i||i,...o})}else e({success:!0,data:o})}),s.addEventListener("error",()=>{e({success:!1,error:"Upload failed"})}),s.open("POST","/api/media/scan-upload"),s.send(a)})}catch(e){return{success:!1,error:"Upload failed"}}}async deleteObject(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"file";return this.makeRequest("/delete","POST",{key:e,type:o})}async createFolder(e){return this.makeRequest("/create-folder","POST",{folderPath:e})}async renameObject(e,o){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"file";return this.makeRequest("/rename","POST",{oldKey:e,newKey:o,type:i})}async moveObject(e,o){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"file";return this.makeRequest("/move","POST",{sourceKey:e,destKey:o,type:i})}}let l=new s,n=e=>{let o="https://cdn2.uzone.id/";if(!o)return console.warn("CDN base URL not configured"),e;let i=e.startsWith("cdn/")?e.substring(4):e;return"".concat(o.replace(/\/$/,""),"/").concat(i)};var r=i(19383),K=i(48860),c=i(34096),U=i(49270),F=i(27924),d=i(16152),g=i(20517);function R(e){let{isOpen:o,register:i,onClose:a}=e,[s,l]=t.useState("");return(0,A.jsxs)(r.u_,{size:"lg",isOpen:o,onClose:a,children:[(0,A.jsx)(K.Z,{}),(0,A.jsxs)(c.h,{children:[(0,A.jsx)(U.x,{children:"Search Asset"}),(0,A.jsx)(F.o,{}),(0,A.jsx)(d.f,{children:(0,A.jsxs)("form",{className:"max-w-md mx-auto",children:[(0,A.jsx)("label",{className:"mb-2 text-sm font-medium text-gray-900 sr-only dark:text-white",children:"Search"}),(0,A.jsxs)("div",{className:"relative",children:[(0,A.jsx)("div",{className:"absolute inset-y-0 start-0 flex items-center ps-3 pointer-events-none",children:(0,A.jsx)("svg",{className:"w-4 h-4 text-gray-500 dark:text-gray-400","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20",children:(0,A.jsx)("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"})})}),(0,A.jsx)("input",{type:"search",id:"default-search",className:"block w-full p-4 ps-10 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Search ...",required:!0}),(0,A.jsx)("button",{type:"submit",className:"text-white absolute end-2.5 bottom-2.5 bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-4 py-2 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",children:"Search"})]})]})}),(0,A.jsx)(g.m,{textAlign:"center"})]})]})}var m=i(25957),h=i(69340),p=i(70996),u=i(60187),C=i(25730),x=i(307),f=i(33145),j=e=>{let{alt:o,className:i,src:a,thumbnail:s,width:l=200,height:n=200}=e,r=t.useCallback(e=>{if(!s||"/images/uzone-default.webp"===e)return e;let o="https://cdn2.uzone.id/";if(!o||!e.includes(o))return e;let i=e.replace(o.replace(/\/$/,""),"").replace(/^\//,"");!i.startsWith("cdn/")&&i.startsWith("assets/")&&(i="cdn/"+i);let A=new URLSearchParams({w:s.width.toString(),h:s.height.toString(),q:(s.quality||75).toString(),f:s.format||"webp"}),t=window.location.origin;return"".concat(t,"/api/media/thumbnail/").concat(i,"?").concat(A)},[s]),[K,c]=t.useState(()=>r(a)),[U,F]=t.useState(!1);return t.useEffect(()=>{c(r(a)),F(!1)},[a,r]),(0,A.jsx)(f.default,{alt:o,title:o,src:K,width:l,height:n,className:i,placeholder:"blur",blurDataURL:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAgGBgcGBQgHBwcJCQgKDBQNDAsLDBkSEw8UHRofHh0aHBwgJC4nICIsIxwcKDcpLDAxNDQ0Hyc5PTgyPC4zNDL/2wBDAQkJCQwLDBgNDRgyIRwhMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjL/wAARCAJYBLADASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD3CiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKSgBaSiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigBaKKSgBaKSigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKXFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAlFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRS0UAJRS0UAJRS0YoASiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiloASilooAMUlLRQAlFLRQAlFLRQAlFLRigBBRilooASilooASilooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigApKWkoAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigApaSloAKKKKACiiigAooooAKKKKAEooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAClpKKAFooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKSlpKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKWkpaACiiigAooooAKKKKACkoooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKWkpaACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAoopaAEooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAEooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAFopKWgAooooAKKKKACiijNACUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFAC0UlLQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABS0lFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAtBpKWgBKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKSlooASiiigAooooAKKKKACiiigAooooAKUUlLQAUUUUAFJRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRmgAooooAKKM0maAFopM0ZoAWiikzQAtFGaKACijNFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAGaWkooAWijNJmgBaKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAEopaSgAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACijNGaACijNGaACkoooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAWikooAWikzS5oAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigBaKSigBaKSigAooooAWikpaACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooASiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACikooAM0UUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABS5pKKAFopM0uaACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAWikpaACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooNFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAJRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUmaAFpKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKWkooAWikooAWiiigAooooAKKKKACiiigAooooAKKKKACiiigBaKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAFNJSmkoAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigBKKWkoAKKKKACiiigAooooAKKKKACiiigAooooASiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKMUALRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQACloooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAU0lKaSgAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAoNFJQAUUUUAFFFFABRRRQAUUUUAJRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFAC0UUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFAC0UlLQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFJS0UAFBoooAU0lKaSgAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACkoooAWkoooAKKKKACiiigAooooAKKKKAEooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKSloAKKSigBaKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKXFFFACYpaKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAClpBS0AFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAKaSlNJQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFJQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAlFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAlFFFAC0UlFAC0UUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFAC0UUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABS0lLQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAppKU0lABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFACUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFJS0lABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFJRS0AFFFFABRRRQAUUlLQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAtFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAClpKWgAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigANFBooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooASiiigAooooAKKKKACiiigAooooAKKKKACiiigApKWkoAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooo/GgAoo49RRx60AFFHHqKOPWgAoo49RS8e1ACUUcetH40AFJS0UAJRRRQAtFFFABRSUZoAWiiigAooooAKKKKACiiigAooooAKKKKACiiigBaKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigBaKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAA0UUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUlFFAC0UlLQAUUUUAFFFFACUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUABpKWkoAKKKKACiiigAooooAKKKKACiiigAooooAKZI+xc0+q919wfWgCNpnPfFN3se5pgpaAHbj6mjJ9TSUtABk+ppMn1NLRQAZPqaTJ9TS0UAJk+poyfU0tFACZPqaMn1NLikoAMn1NAZh/EaKSgC1C5ZOeoqWoLfo1T0AFLSUUALRSUUALRSUtABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFAC0UUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFAoooAWiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooNFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFGaACikooAKKKKACiiigApaSigBaKKKACg0UUAJRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUlLSUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUCCq939xfrViq9591PrQMrUtJRQA4HmjNMJPateGC3uIEkCYyOcetAGXRWv9hg/un86PsUH90/nQBk0VsC0gH8FKLaEf8s1oAxqK2xDEP8Almv5Uvlp/cX8qAMOkrcKxngKD+FRTWkciEBQrdiKAMikpehIPBHFFAE1v/FViq9v/FVigAooooAKKKKAClpKWgAooooAKKKKACiiigAooooAKKKKACiiigBaKKKACiiigAooooAKKKKACiiigAoopaACiig0AJRRRQAUUUUAFFFFABS0lLQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUABopTSUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAlFFFABRRRQAUUUUAFFFFABRRRQAUtJRQAtFJRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFJS0lABRRRQAUUUUAFFFFABRRRQAUUUlABS0UUAFV7z7q/WrFV7v7i/WgCrRRRQAGrulS7ZHhPRvmH171SpUYxyK69VORQB0NFMimSaMOpGD+lOzQAtFNLgdSKareb9w8dyKAHFwDgcn0FIFZvvnHsKeqhRwKKAAAAYFFFLQBi3ieXduOzfMPxqGr2qL88T9yCKo0ATW/VqsVXt+rVYoAKKKKACiiigApRSUtABRRRQAUUUUAFFFFABRRRQAUUUUAFAoooAWiiigAooooAKKKKACiiigAooooAKWkpaACiig0AJRRRQAUUUUAFFFFABS0lAoAWiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigBTSUppKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooASiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKSlpDQAUUUUAFFFFABRRRQAUUUUAFJS0lABRRRQAtV7v7q/WrFVrv7q/WgCtS0UUAFFJmigAGVOVYj6Gnq9w7BVklJ7AGrEFhLLgt8i+/WtOG3jgXCLz3J6mgCnBpzN810xY9kzwPrWgqhVCqAAOgFLRQAUUUySVIl3OwUe9AD6imuI4B8x57KOpqlNqLNlYRtH949apHJOSSSepNAEk8zzybn49B6VFS0GgCW36tViq9v1arFABRRRQAUUUUAFLSUUALRRRQAUUUUAFFFFABRRRQAUUUUAFFFFAC0UUUAFFFFABRRRQAUUUUAFFFFABRRRQAZooooAKKKKACiiigAooooAKKKKAFooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAU0lKaSgAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAEooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACkNLSGgAooooAKKKKACiiigAooooAQ0UtJQAUUUUALVe7+6v1qxVe76L9aAK1IaWpLWNZrpUboeaAFgtZJz8owO7HpWrBaRQYIG5v7xqZVCqFUAAdAKWgAooooAWmvIkalnYAepqOV32lYQpf1boKqf2fJI2+e4Ln2HAoAbNqTHIgXA/vNVNiztudix9TWgNPQfxNSnT17M1AGdRUtxA1uwBOQehqKgApKWkoAnt+rVPUFv/FU9ABRRRQAUUUUAFFFFAC0UUUAFFFFABRRRQAUUUUAFFFFABRRQKAFooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAFFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFACmkoNFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFJS0lABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUlLSUAFFFFABRRRQAUUUUAFFFFABRRRQAUlBooAWq910X61YqvdfdX60AVqfbP5dzG3+1imUh9qAOioqK3l82BH7kc/Wnsx/hGTQArOqjJOKi3NJ6qv60bMnLcmn80AIAAMAYFOpMUuKAAU6kpaAIbmHzoGXuOR9axs10FY97F5VycfdfmgCCkoooAnt/4qnqC3/iqegAooooAKKKKACiiigBaKKKACiiigAooooAKKKKACiiigAoFFLQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFAC0UUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUABooNFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFACUUppKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACkpaSgAooooAKKKKACiiigAooooAKKKKACkpaSgBar3X3V+tWKr3P3V+tAFekIpaSgB8c0sQIRyB6U/7XP/AM9DUNFAE32qb/noaQ3M3981FRQBJ9om/wCejUnny/8APRvzplFADvNl/wCej/nR5sv/AD0f/vqm0UAPE8w/5av+dIzs5+ZifrTaKAHZopM0UAWLf+Kp6r2/8VWKACiiigAooooAKKKWgAooooAKKKKACiiigAooooAKKKKACgUUtABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUALRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFJS0UAJRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABSUtJQAUUUUAFFFFABRRRQAUUUUAFFFFABSGlooASoZwSgx2NTUUAUcUmKvYHpRtHpQBRoxV/avoKNq+goAz6K0Nq+go2r6CgDPorQ2L6CjYvoKAM/FFX9i+go2L6CgChRV/YvoKN",onError:()=>{U||(F(!0),s&&K!==a?c(a):c("/images/uzone-default.webp"))},loading:"lazy"})},B=i(61273),b=i(49089);function Q(e){let{isOpen:o,onClose:i,src:t,alt:a}=e;return(0,A.jsxs)(r.u_,{isOpen:o,onClose:i,children:[(0,A.jsx)(K.Z,{bg:"rgba(0, 0, 0, 0.5)"}),(0,A.jsxs)(c.h,{bg:"transparent",boxShadow:"none",maxWidth:{base:"full",md:"700px"},children:[(0,A.jsx)(F.o,{onClick:i,bg:"rgba(255, 255, 255, 0.3)"}),(0,A.jsx)(d.f,{children:(0,A.jsx)(j,{src:t,alt:a,className:"object-cover w-full h-full rounded"})})]})]})}var v=i(78796),y=i(26553),w=i(25810),S=i(80605);function N(e){let{isOpen:o,setTriggerUpdate:i,folderName:a,onClose:s,pathSelected:n}=e,r=t.useRef(null),{data:c}=(0,S.useSession)(),{isModalMedia:F}=(0,m.G)(),R=(0,v.p)(),[h,p]=t.useState(!1),u=async()=>{p(!0);let e="".concat(n).concat(a);try{let A;if((A=a.endsWith("/")?await l.deleteObject(e,"folder"):await l.deleteObject(e,"file")).success){var o;i(Math.random()),s(),R({title:"Success",description:(null===(o=A.data)||void 0===o?void 0:o.message)||"Item deleted successfully",status:"success",duration:7e3,position:"top",isClosable:!0})}else R({title:"Error",description:A.error||"Failed to delete item.",status:"error",duration:7e3,position:"top",isClosable:!0})}catch(e){R({title:"Error",description:e.message||"An error occurred while deleting the item.",status:"error",duration:7e3,position:"top",isClosable:!0})}finally{p(!1)}};return(0,A.jsx)(y.a,{isOpen:o,leastDestructiveRef:r,onClose:s,children:(0,A.jsx)(K.Z,{style:{zIndex:F?9999:"auto"},children:(0,A.jsxs)(y._,{style:{zIndex:F?1e4:"auto"},children:[(0,A.jsx)(U.x,{fontSize:"lg",fontWeight:"bold",children:"Delete Data"}),(0,A.jsx)(d.f,{children:"Apakah anda yakin ingin menghapus folder/file ini?"}),(0,A.jsxs)(g.m,{children:[(0,A.jsx)(w.z,{ref:r,onClick:s,children:"Cancel"}),(0,A.jsx)(w.z,{colorScheme:"red",onClick:()=>u(),isLoading:h,ml:3,children:"Delete"})]})]})})})}function k(e){let{isOpen:o,onClose:i,filePath:a,filename:s}=e,l=t.useCallback(async()=>{try{let e=a;(e=e.replace(/^\/cdn\/cdn\//,"cdn/")).startsWith("cdn/")||(e=e.replace(/^\//,""),e="cdn/".concat(e)),e=e.replace(/\/+/g,"/"),console.log("Original filePath:",a),console.log("Cleaned filePath:",e);let o=await fetch("/api/media/serve/".concat(e,"?download=true"));if(!o.ok)throw Error("Download failed: ".concat(o.status));let A=await o.blob(),t=window.URL.createObjectURL(A),l=document.createElement("a");l.href=t,l.download=s||a.split("/").pop()||"download",document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(t),i()}catch(e){console.error("Download error:",e),i()}},[a,s,i]);return t.useEffect(()=>{o&&l()},[o,l]),(0,A.jsxs)(r.u_,{size:"lg",isOpen:o,onClose:i,children:[(0,A.jsx)(K.Z,{}),(0,A.jsxs)(c.h,{children:[(0,A.jsx)(U.x,{children:"Download Image"}),(0,A.jsx)(d.f,{mb:7,children:(0,A.jsx)(x.E,{size:"xs",isIndeterminate:!0})})]})]})}function O(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";let i=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,i)).toFixed(o))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][i]}function T(e){let{files:o,statusFiles:a}=e,{pathSelected:s,setPathBack:l,setPathSelected:r,setTriggerUpdate:K,isModalMedia:c,setSeletectedImage:U,closeMedia:F,openFeatureImage:d,isOpenGallery:g,closeGallery:R,gallery:f,setGallery:v}=(0,m.G)(),[y,w]=t.useState({}),[S,T]=t.useState(""),[D,L]=t.useState(""),I=e=>{w(o=>({...o,[e]:!0}))},z=e=>{w(o=>({...o,[e]:!1}))},{isOpen:M,onOpen:E,onClose:q}=(0,h.q)(),{isOpen:P,onOpen:W,onClose:J}=(0,h.q)(),{isOpen:G,onOpen:_,onClose:H}=(0,h.q)();return(0,A.jsx)(A.Fragment,{children:"loaded"===a?(0,A.jsxs)("div",{className:"grid grid-cols-2 gap-4 lg:grid-cols-5",children:[(0,A.jsx)(N,{isOpen:P,setTriggerUpdate:K,onClose:J,folderName:D,pathSelected:s}),(0,A.jsx)(Q,{isOpen:M,onClose:q,src:S,alt:"preview image"}),(0,A.jsx)(k,{isOpen:G,onClose:H,filePath:S,filename:S.split("/").pop()}),o.map(e=>(0,A.jsx)("span",{children:"folder"===e.type?(0,A.jsxs)("div",{onClick:()=>{let{setBypassNavCheck:o}=i(35586).b.getState();o(!0),l(s),r(e.path),setTimeout(()=>o(!1),100)},className:"px-3 mx-auto text-center rounded-md cursor-pointer hover:bg-gray-200 dark:hover:bg-gray-700",children:[(0,A.jsx)(B.MDs,{className:"w-32 h-32 mx-auto text-yellow-400"}),(0,A.jsx)("div",{className:"p-2 text-sm font-semibold min-h-16",children:e.name.length>20?"".concat(e.name.slice(0,17),"..."):e.name})]}):(0,A.jsxs)(p.xu,{maxW:"sm",borderWidth:"1px",rounded:"lg",shadow:"md",position:"relative",onMouseEnter:()=>I(e.name),onMouseLeave:()=>z(e.name),_hover:{cursor:c?"default":"pointer"},onClick:()=>{"folder"!==e.type&&(g?(v([...f,{img:n(e.path),caption:""}]),R()):(d(),U(n(e.path))),F())},children:[(0,A.jsxs)(p.xu,{position:"relative",children:[(0,A.jsx)(j,{src:n(e.path),alt:e.name,className:"object-cover w-full h-32 rounded-t-lg",width:320,height:128,thumbnail:{width:320,height:128,quality:75,format:"webp"}}),y[e.name]&&(0,A.jsxs)(p.xu,{position:"absolute",bottom:"0",left:"0",right:"0",p:"2",bg:"rgba(0, 0, 0, 0.6)",rounded:"md",display:"flex",justifyContent:"space-between",cursor:"pointer",onClick:e=>{e.stopPropagation(),e.preventDefault()},children:[(0,A.jsx)(u.u,{label:"Delete","aria-label":"Delete file",children:(0,A.jsx)(C.h,{icon:(0,A.jsx)(b.Xm5,{}),size:"sm",variant:"ghost",color:"white","aria-label":"Delete",onClick:o=>{o.stopPropagation(),o.preventDefault(),W(),L(e.name)}})}),(0,A.jsx)(u.u,{label:"Preview","aria-label":"Preview file",children:(0,A.jsx)(C.h,{icon:(0,A.jsx)(b.dSq,{}),size:"sm",variant:"ghost",color:"white","aria-label":"Preview",onClick:o=>{o.stopPropagation(),o.preventDefault(),E(),T(n(e.path))}})}),(0,A.jsx)(u.u,{label:"Download","aria-label":"Download file",children:(0,A.jsx)(C.h,{icon:(0,A.jsx)(b.aBF,{}),size:"sm",variant:"ghost",color:"white","aria-label":"Download",onClick:o=>{o.stopPropagation(),o.preventDefault(),_(),T("/cdn/".concat(s,"/").concat(e.name))}})})]})]}),(0,A.jsx)("div",{className:"p-2 text-xs font-semibold",children:e.name.length>20?"".concat(e.name.slice(0,17),"..."):e.name}),(0,A.jsx)("div",{className:"pl-2 text-xs text-gray-500",children:"N/A"!=e.size?O(e.size):"N/A"})]})},e.name))]}):(0,A.jsx)(A.Fragment,{children:"loading"===a?(0,A.jsx)(x.E,{size:"xs",isIndeterminate:!0}):(0,A.jsx)(A.Fragment,{children:"Empty"})})})}var D=i(37983),L=i(48373),I=i(10272),z=i(70638),M=i(21438),E=i(9091),q=i(31092),P=i(71096),W=i.n(P),J=i(64043),G=i.n(J);function _(e){let{files:o,statusFiles:a}=e,[s,l]=t.useState(""),{pathSelected:r,setPathBack:K,setPathSelected:c,setTriggerUpdate:U,setSeletectedImage:F,closeMedia:d,openFeatureImage:g,isOpenGallery:R,closeGallery:p,gallery:f,setGallery:v}=(0,m.G)(),y=r.replace("/cdn/",""),{isOpen:w,onOpen:S,onClose:T}=(0,h.q)(),{isOpen:P,onOpen:J,onClose:G}=(0,h.q)(),{isOpen:_,onOpen:H,onClose:V}=(0,h.q)(),[Z,Y]=t.useState(""),[X,$]=t.useState(""),[ee,eo]=t.useState("");return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(N,{isOpen:w,setTriggerUpdate:U,onClose:T,folderName:Z,pathSelected:r}),(0,A.jsx)(Q,{isOpen:P,onClose:G,src:X,alt:ee}),(0,A.jsx)(k,{isOpen:_,onClose:V,filePath:s,filename:s.split("/").pop()}),(0,A.jsx)(D.x,{children:(0,A.jsxs)(L.i,{size:"sm",variant:"striped",children:[(0,A.jsx)(I.h,{children:(0,A.jsxs)(z.Tr,{children:[(0,A.jsx)(M.Th,{children:"Filename"}),(0,A.jsx)(M.Th,{children:"Type"}),(0,A.jsx)(M.Th,{children:"Size"}),(0,A.jsx)(M.Th,{children:"Date"}),(0,A.jsx)(M.Th,{children:"Action"})]})}),(0,A.jsx)(E.p,{children:"loaded"==a?o.map(e=>{var o;return(0,A.jsxs)(z.Tr,{children:[(0,A.jsx)(q.Td,{className:"cursor-pointer",onClick:()=>{if(e.path.replace("/cdn/",""),"folder"!==e.type)R?(v([...f,{img:n(e.path),caption:""}]),p()):(g(),F(n(e.path))),d();else{let{setBypassNavCheck:o}=i(35586).b.getState();o(!0),K(r),c(e.path),setTimeout(()=>o(!1),100)}},children:"folder"==e.type?(0,A.jsxs)("button",{className:"flex",children:[(0,A.jsx)(B.MDs,{className:"text-yellow-400 w-7 h-7"})," ",(0,A.jsx)("span",{className:"my-auto ml-2",children:e.name})]}):(0,A.jsxs)("span",{className:"flex",children:[(0,A.jsx)(j,{src:n(e.path),alt:e.name,className:"object-cover rounded w-7 h-7",width:28,height:28,thumbnail:{width:32,height:32,quality:65,format:"webp"}}),(0,A.jsx)("span",{className:"my-auto ml-2 whitespace-break-spaces",children:e.name})]})}),(0,A.jsx)(q.Td,{children:e.type}),(0,A.jsx)(q.Td,{children:"N/A"!=e.size?O(e.size):"N/A"}),(0,A.jsx)(q.Td,{children:(null==e?void 0:null===(o=e.date_info)||void 0===o?void 0:o.modification_time)&&"N/A"!==e.date_info.modification_time?W()(e.date_info.modification_time).format("DD-MMM-YYYY HH:mm"):"N/A"}),(0,A.jsxs)(q.Td,{children:[(0,A.jsx)(u.u,{label:"Delete","aria-label":"Delete file",children:(0,A.jsx)(C.h,{icon:(0,A.jsx)(b.Xm5,{}),size:"sm",variant:"ghost","aria-label":"Delete",onClick:()=>{S(),Y(e.name)}})}),(0,A.jsx)(u.u,{label:"Preview","aria-label":"Preview file",children:(0,A.jsx)(C.h,{icon:(0,A.jsx)(b.dSq,{}),size:"sm",variant:"ghost","aria-label":"Preview",onClick:()=>{J(),$(n(e.path)),eo(e.name)}})}),"file"===e.type&&(0,A.jsx)(u.u,{label:"Download","aria-label":"Download file",children:(0,A.jsx)(C.h,{icon:(0,A.jsx)(b.aBF,{}),size:"sm",variant:"ghost","aria-label":"Download",onClick:()=>{H(),l("/cdn/".concat(y,"/").concat(e.name))}})})]})]},e.name)}):(0,A.jsx)(A.Fragment,{children:"loading"==a?(0,A.jsx)(z.Tr,{children:(0,A.jsx)(q.Td,{colSpan:5,children:(0,A.jsx)(x.E,{size:"xs",isIndeterminate:!0})})}):(0,A.jsx)(z.Tr,{children:(0,A.jsx)(q.Td,{colSpan:5,children:(0,A.jsx)("div",{className:"flex justify-center",children:"Empty"})})})})})]})})]})}W().extend(G());var H=i(83930);function V(e){let{files:o,statusFiles:i}=e,{pathSelected:a,setPathBack:s,setPathSelected:l,setTriggerUpdate:r,closeMedia:K}=(0,m.G)(),{onOpenImage:c,setImageTextEditor:U}=(0,H.k)(),[F,d]=t.useState({}),[g,R]=t.useState(""),[f,v]=t.useState(""),[y,w]=t.useState("");a.replace("/cdn/","");let S=e=>{d(o=>({...o,[e]:!0}))},k=e=>{d(o=>({...o,[e]:!1}))},{isOpen:T,onOpen:D,onClose:L}=(0,h.q)(),{isOpen:I,onOpen:z,onClose:M}=(0,h.q)(),E=async e=>{let o=n(e.path),i=e.name;try{let e="undefined"!=typeof navigator&&navigator.userAgent?navigator.userAgent:"UZone-CMS-Client/1.0 (+https://uzone.id)",A=await fetch(o,{headers:{"User-Agent":e}}),t=await A.blob(),a=window.URL.createObjectURL(t),s=document.createElement("a");s.href=a,s.download=i,document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(a)}catch(e){}};return(0,A.jsx)(A.Fragment,{children:"loaded"===i?(0,A.jsxs)("div",{className:"grid grid-cols-2 gap-4 lg:grid-cols-5",children:[(0,A.jsx)(N,{isOpen:I,setTriggerUpdate:r,onClose:M,folderName:f,pathSelected:a}),(0,A.jsx)(Q,{isOpen:T,onClose:L,src:g,alt:"preview image"}),o.map(e=>(0,A.jsx)("span",{children:"folder"===e.type?(0,A.jsxs)("div",{onClick:()=>{s(a),l(e.path)},className:"px-3 mx-auto text-center rounded-md cursor-pointer hover:bg-gray-200 dark:hover:bg-gray-700",children:[(0,A.jsx)(B.MDs,{className:"w-32 h-32 mx-auto text-yellow-400"}),(0,A.jsx)("div",{className:"p-2 text-sm font-semibold min-h-16",children:e.name.length>20?"".concat(e.name.slice(0,17),"..."):e.name})]}):(0,A.jsxs)(p.xu,{maxW:"sm",borderWidth:"1px",rounded:"lg",shadow:"md",position:"relative",onMouseEnter:()=>S(e.name),onMouseLeave:()=>k(e.name),_hover:"pointer",onClick:()=>{e.path.replace("/cdn/",""),"folder"!==e.type&&(c(),U(n(e.path)),K())},children:[(0,A.jsxs)(p.xu,{position:"relative",children:[(0,A.jsx)(j,{src:n(e.path),alt:e.name,className:"object-cover w-full h-32 rounded-t-lg"}),F[e.name]&&(0,A.jsxs)(p.xu,{position:"absolute",bottom:"0",left:"0",right:"0",p:"2",bg:"rgba(0, 0, 0, 0.6)",rounded:"md",display:"flex",justifyContent:"space-between",cursor:"pointer",children:[(0,A.jsx)(u.u,{label:"Delete","aria-label":"Delete file",children:(0,A.jsx)(C.h,{icon:(0,A.jsx)(b.Xm5,{}),size:"sm",variant:"ghost",color:"white","aria-label":"Delete",onClick:o=>{o.stopPropagation(),z(),v(e.name)}})}),(0,A.jsx)(u.u,{label:"Preview","aria-label":"Preview file",children:(0,A.jsx)(C.h,{icon:(0,A.jsx)(b.dSq,{}),size:"sm",variant:"ghost",color:"white","aria-label":"Preview",onClick:o=>{o.stopPropagation(),D(),R(n(e.path))}})}),(0,A.jsx)(u.u,{label:"Download","aria-label":"Download file",children:(0,A.jsx)(C.h,{icon:(0,A.jsx)(b.aBF,{}),size:"sm",variant:"ghost",color:"white","aria-label":"Download",onClick:o=>{o.stopPropagation(),E(e)}})})]})]}),(0,A.jsx)("div",{className:"p-2 text-xs font-semibold",children:e.name.length>20?"".concat(e.name.slice(0,17),"..."):e.name}),(0,A.jsx)("div",{className:"pl-2 text-xs text-gray-500",children:"N/A"!=e.size?O(e.size):"N/A"})]})},e.name))]}):(0,A.jsx)(A.Fragment,{children:"loading"===i?(0,A.jsx)(x.E,{size:"xs",isIndeterminate:!0}):(0,A.jsx)(A.Fragment,{children:"Empty"})})})}function Z(e){let{files:o,statusFiles:i}=e,{pathSelected:a,setPathBack:s,setPathSelected:l,setTriggerUpdate:r,closeMedia:K}=(0,m.G)();a.replace("/cdn/","");let{isOpen:c,onOpen:U,onClose:F}=(0,h.q)(),{isOpen:d,onOpen:g,onClose:R}=(0,h.q)(),{onOpenImage:p,setImageTextEditor:f}=(0,H.k)(),[v,y]=t.useState(""),[w,S]=t.useState(""),[k,T]=t.useState(""),[P,J]=t.useState(""),G=async e=>{let o=n(e.path),i=e.name;try{let e="undefined"!=typeof navigator&&navigator.userAgent?navigator.userAgent:"UZone-CMS-Client/1.0 (+https://uzone.id)",A=await fetch(o,{headers:{"User-Agent":e}}),t=await A.blob(),a=window.URL.createObjectURL(t),s=document.createElement("a");s.href=a,s.download=i,document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(a)}catch(e){}};return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(N,{isOpen:c,setTriggerUpdate:r,onClose:F,folderName:v,pathSelected:a}),(0,A.jsx)(Q,{isOpen:d,onClose:R,src:k,alt:P}),(0,A.jsx)(D.x,{children:(0,A.jsxs)(L.i,{size:"sm",variant:"striped",children:[(0,A.jsx)(I.h,{children:(0,A.jsxs)(z.Tr,{children:[(0,A.jsx)(M.Th,{children:"Filename"}),(0,A.jsx)(M.Th,{children:"Type"}),(0,A.jsx)(M.Th,{children:"Size"}),(0,A.jsx)(M.Th,{children:"Date"}),(0,A.jsx)(M.Th,{children:"Action"})]})}),(0,A.jsx)(E.p,{children:"loaded"==i?o.map(e=>{var o;return(0,A.jsxs)(z.Tr,{onClick:()=>{e.path.replace("/cdn/",""),"folder"!==e.type&&(p(),f(n(e.path)),K())},children:[(0,A.jsx)(q.Td,{className:"cursor-pointer",onClick:o=>{o.stopPropagation(),"folder"==e.type&&(s(a),l(e.path))},children:"folder"==e.type?(0,A.jsxs)("button",{className:"flex",children:[(0,A.jsx)(B.MDs,{className:"text-yellow-400 w-7 h-7"})," ",(0,A.jsx)("span",{className:"my-auto ml-2",children:e.name})]}):(0,A.jsxs)("span",{className:"flex",children:[(0,A.jsx)(j,{src:n(e.path),alt:e.name,className:"object-cover rounded w-7 h-7"}),(0,A.jsx)("span",{className:"my-auto ml-2 whitespace-break-spaces",children:e.name})]})}),(0,A.jsx)(q.Td,{children:e.type}),(0,A.jsx)(q.Td,{children:"N/A"!=e.size?O(e.size):"N/A"}),(0,A.jsx)(q.Td,{children:(null==e?void 0:null===(o=e.date_info)||void 0===o?void 0:o.modification_time)&&"N/A"!==e.date_info.modification_time?W()(e.date_info.modification_time).format("DD-MMM-YYYY HH:mm"):"N/A"}),(0,A.jsxs)(q.Td,{onClick:e=>e.stopPropagation(),children:[(0,A.jsx)(u.u,{label:"Delete","aria-label":"Delete file",children:(0,A.jsx)(C.h,{icon:(0,A.jsx)(b.Xm5,{}),size:"sm",variant:"ghost","aria-label":"Delete",onClick:o=>{o.stopPropagation(),U(),y(e.name)}})}),(0,A.jsx)(u.u,{label:"Preview","aria-label":"Preview file",children:(0,A.jsx)(C.h,{icon:(0,A.jsx)(b.dSq,{}),size:"sm",variant:"ghost","aria-label":"Preview",onClick:o=>{o.stopPropagation(),g(),T(n(e.path)),J(e.name)}})}),"file"===e.type&&(0,A.jsx)(u.u,{label:"Download","aria-label":"Download file",children:(0,A.jsx)(C.h,{icon:(0,A.jsx)(b.aBF,{}),size:"sm",variant:"ghost","aria-label":"Download",onClick:o=>{o.stopPropagation(),G(e)}})})]})]},e.name)}):(0,A.jsx)(A.Fragment,{children:"loading"==i?(0,A.jsx)(z.Tr,{children:(0,A.jsx)(q.Td,{colSpan:5,children:(0,A.jsx)(x.E,{size:"xs",isIndeterminate:!0})})}):(0,A.jsx)(z.Tr,{children:(0,A.jsx)(q.Td,{colSpan:5,children:(0,A.jsx)("div",{className:"flex justify-center",children:"Empty"})})})})})]})})]})}function Y(e){let{session:o}=e,[i,a]=t.useState([]),[s,n]=t.useState("loading"),{pathSelected:r,typeView:K,triggerUpdate:c,sortBy:U,searchTerm:F}=(0,m.G)(),{isInsertImage:d}=(0,H.k)();return t.useEffect(()=>{let e=async()=>{n("loading");try{let e=await l.listObjects(r);if(e.success&&e.data){let o=e.data.items;F&&(o=o.filter(e=>e.name.toLowerCase().includes(F.toLowerCase()))),o.sort((e,o)=>{if("folder"===e.type&&"folder"!==o.type)return -1;if("folder"!==e.type&&"folder"===o.type)return 1;if("name_asc"===U)return e.name.localeCompare(o.name);if("name_desc"===U)return o.name.localeCompare(e.name);if("date_newest"===U){let i="N/A"!==e.date_info.modification_time?new Date(e.date_info.modification_time).getTime():0;return("N/A"!==o.date_info.modification_time?new Date(o.date_info.modification_time).getTime():0)-i}if("date_oldest"===U){let i="N/A"!==e.date_info.modification_time?new Date(e.date_info.modification_time).getTime():0,A="N/A"!==o.date_info.modification_time?new Date(o.date_info.modification_time).getTime():0;return i-A}return 0}),a(o),n(o.length>0?"loaded":"empty")}else console.error("Failed to fetch S3 files:",e.error),n("error"),a([])}catch(e){console.error("Failed to fetch S3 files:",e),n("error"),a([])}};r&&e()},[r,c,U,F]),(0,A.jsx)("main",{className:"flex-1 h-full p-4 overflow-y-auto bg-gray-100 dark:bg-gray-800",children:d?(0,A.jsx)(A.Fragment,{children:"grid"==K?(0,A.jsx)(V,{files:i,statusFiles:s}):(0,A.jsx)(Z,{files:i,statusFiles:s})}):(0,A.jsx)(A.Fragment,{children:"grid"==K?(0,A.jsx)(T,{files:i,statusFiles:s}):(0,A.jsx)(_,{files:i,statusFiles:s})})})}W().extend(G());var X=i(69050),$=i(64556),ee=i(87461),eo=i(28082),ei=i(86333),eA=i(77951),et=i(46402),ea=i(12125),es=i(10883),el=i(68193),en=i(22917),er=i(37996),eK=i(32768),ec=i(11140),eU=i(13449),eF=i(14123);function ed(){let{data:e}=(0,S.useSession)(),[o,i]=t.useState(""),[a,s]=t.useState(!1),[n,r]=t.useState(!1),{pathSelected:K,setTriggerUpdate:c}=(0,m.G)(),U=(0,v.p)(),F=async()=>{s(!0);try{let A="".concat(K).concat(o,"/"),t=await l.createFolder(A);if(t.success){var e;c(Math.random()),r(!1),i(""),U({title:"Success",description:(null===(e=t.data)||void 0===e?void 0:e.message)||"Folder created successfully",status:"success",duration:7e3,position:"top",isClosable:!0})}else U({title:"Error",description:t.error||"Failed to create folder.",status:"error",duration:7e3,position:"top",isClosable:!0})}catch(e){U({title:"Error",description:e.message||"An error occurred while creating the folder.",status:"error",duration:7e3,position:"top",isClosable:!0})}finally{s(!1)}};return(0,A.jsx)(eU.k,{alignItems:"center",children:(0,A.jsxs)(ei.v,{isOpen:n,onClose:()=>r(!1),children:[(0,A.jsx)(eA.j,{py:2,transition:"all 0.3s",_focus:{boxShadow:"none"},onClick:()=>r(!n),children:(0,A.jsx)(C.h,{size:"lg",variant:"ghost","aria-label":"open menu",icon:(0,A.jsx)(er.zP9,{})})}),(0,A.jsxs)(et.q,{bg:(0,eF.ff)("white","gray.900"),borderColor:(0,eF.ff)("gray.200","gray.700"),children:[(0,A.jsx)("div",{className:"p-2 font-bold",children:(0,A.jsx)("p",{children:"Add Folder"})}),(0,A.jsxs)("form",{className:"max-w-sm p-2 mx-auto",children:[(0,A.jsx)("div",{className:"mb-5",children:(0,A.jsx)("input",{type:"text",autoComplete:"off",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"folder name",required:!0,onChange:e=>i(e.target.value)})}),(0,A.jsxs)("div",{className:"flex justify-between",children:[(0,A.jsx)(w.z,{onClick:()=>r(!1),isLoading:a,colorScheme:"red",children:"Cancel"}),(0,A.jsx)(w.z,{isLoading:a,onClick:F,colorScheme:"blue",children:"Save"})]})]})]})]})})}var eg=i(22744),eR=i(61507),em=i(6314),eh=i(19847),ep=i(74808);let eu=e=>new Promise(o=>{if(!e.type.startsWith("image/")||void 0===ep||!ep.getData){o(null);return}let i=setTimeout(()=>{o(null)},5e3);try{let A=new Image;A.onload=function(){ep.getData(A,function(){try{clearTimeout(i);let e={},t=ep.getTag(this,"DateTime"),a=ep.getTag(this,"DateTimeOriginal"),s=ep.getTag(this,"DateTimeDigitized");t&&(e.dateTime=t),a&&(e.dateTimeOriginal=a),s&&(e.dateTimeDigitized=s);let l=ep.getTag(this,"Make"),n=ep.getTag(this,"Model"),r=ep.getTag(this,"Software"),K=ep.getTag(this,"Orientation");l&&(e.make=l),n&&(e.model=n),r&&(e.software=r),K&&(e.orientation=K),URL.revokeObjectURL(A.src),o(e)}catch(e){clearTimeout(i),URL.revokeObjectURL(A.src),o(null)}})},A.onerror=function(){clearTimeout(i),URL.revokeObjectURL(A.src),o(null)},A.src=URL.createObjectURL(e)}catch(e){clearTimeout(i),o(null)}}),eC=e=>{try{let o=e.replace(/^(\d{4}):(\d{2}):(\d{2}) /,"$1-$2-$3T")+".000Z",i=new Date(o);if(isNaN(i.getTime()))return null;return i.toISOString()}catch(e){return null}},ex=e=>{if(e.dateTimeOriginal){let o=eC(e.dateTimeOriginal);if(o)return o}if(e.dateTimeDigitized){let o=eC(e.dateTimeDigitized);if(o)return o}if(e.dateTime){let o=eC(e.dateTime);if(o)return o}return null};function ef(e){let{isOpen:o,onClose:a}=e,[s,n]=t.useState([]),[R,h]=t.useState(null),[p,u]=t.useState(""),{data:j}=(0,S.useSession)(),[B,b]=t.useState(!1),[Q,y]=t.useState(0),[N,k]=t.useState(!1),[O,T]=t.useState([]),D=(0,v.p)(),{pathSelected:L,setTriggerUpdate:I}=(0,m.G)(),z=t.useCallback(async e=>{let o=[];for(let A of(k(!0),e)){if(A.size>2097152){D({title:"Error",description:"File ".concat(A.name," exceeds 2MB limit"),status:"error",duration:7e3,position:"top",isClosable:!0});continue}try{let e=A;if("image/heic"===A.type||"image/heif"===A.type){let o=(await i.e(2156).then(i.t.bind(i,39140,23))).default,t=await o({blob:A,toType:"image/jpeg"}),a=A.name.replace(/\.[^/.]+$/,".jpg");e=new File([t instanceof Blob?t:t[0]],a,{type:"image/jpeg"}),T(e=>[...e,A.name])}let t=await Z(e),a=null;if(e.type.startsWith("image/"))try{let o=await eu(e);o&&(a=ex(o))}catch(e){}o.push({file:e,customName:J(e.name),originalName:A.name,dimensions:t,isConverted:"image/heic"===A.type||"image/heif"===A.type,exifDate:a})}catch(e){D({title:"Error",description:"Failed to process file: ".concat(A.name),status:"error",duration:7e3,position:"top",isClosable:!0})}}k(!1),n(e=>[...e,...o])},[D]),{getRootProps:M,getInputProps:E,isDragActive:q}=(0,eh.uI)({onDrop:e=>{(async()=>{await z(e)})()},accept:{"image/*":[".jpeg",".png",".jpg",".gif",".webp",".heic"],"application/pdf":[".pdf"]},maxFiles:10}),P=e=>{h(e.originalName),u(e.customName)},W=e=>{u(e.target.value)},J=e=>e.replace(/[^a-zA-Z0-9._-]/g,"-").replace(/-+/g,"-").replace(/^-+|-+$/g,"").replace(/^\.+/,"")||"file-".concat(Date.now()),G=e=>e.slice((e.lastIndexOf(".")-1>>>0)+2).toLowerCase(),_=(e,o)=>{let i=e.lastIndexOf("."),A=i>0?e.substring(0,i):e;return(A&&""!==A.trim()||(A="file-".concat(Date.now())),"heic"===o.toLowerCase()||"heif"===o.toLowerCase())?"".concat(A,".jpg"):"".concat(A,".").concat(o.toLowerCase())},H=e=>{let o;let i=[...s],A=i[e];o=A.isConverted?"jpg":G(A.originalName);let t=_(J(p),o);i[e]={...i[e],customName:t},n(i),h(null)},V=()=>{h(null),u("")},Z=e=>new Promise((o,i)=>{let A=new window.Image;A.src=URL.createObjectURL(e),A.onload=()=>{URL.revokeObjectURL(A.src),o({width:A.width,height:A.height,isFHD:A.width>=1920&&A.height>=1080})},A.onerror=()=>{URL.revokeObjectURL(A.src),i(Error("Failed to load image"))}}),Y=async()=>{b(!0),y(0);let e=0,o=0,i=[];try{for(let a=0;a<s.length;a++){let n=s[a];try{let r=await l.uploadFile(n.file,L,n.customName,e=>{let o=a/s.length*100,i=e/100*(100/s.length);y(o+i)},n.exifDate);if(r.success)e++;else{var A,t;o++,console.error("Failed to upload ".concat(n.customName,":"),r.error),(422===r.status||(null===(t=r.data)||void 0===t?void 0:null===(A=t.scan)||void 0===A?void 0:A.clean)===!1||"string"==typeof r.error&&r.error.toLowerCase().includes("malware"))&&i.push(n.customName)}}catch(e){o++,console.error("Failed to upload ".concat(n.customName,":"),e)}y((a+1)/s.length*100)}if(e>0){let A=i.length?" Blocked by scan (".concat(i.length,"): ").concat(i.join(", ")):"";D({title:"Upload Complete",description:"Successfully uploaded ".concat(e," file(s)").concat(o>0?", ".concat(o," failed."):".").concat(A),status:"success",duration:9e3,position:"top",isClosable:!0}),I(Math.random()),a(),n([])}else{let e=i.length?"Blocked by scan (".concat(i.length,"): ").concat(i.join(", ")):"Check file types and sizes.";D({title:"Upload Failed",description:"All ".concat(s.length," file(s) failed. ").concat(e),status:"error",duration:9e3,position:"top",isClosable:!0})}}catch(e){D({title:"Error",description:"An error occurred while uploading the files.",status:"error",duration:7e3,position:"top",isClosable:!0})}finally{b(!1),y(0)}};return(0,A.jsxs)(r.u_,{size:"lg",scrollBehavior:"inside",isOpen:o,onClose:a,children:[(0,A.jsx)(K.Z,{}),(0,A.jsxs)(c.h,{children:[(0,A.jsx)(U.x,{children:"Upload Files"}),(0,A.jsx)(F.o,{}),(0,A.jsxs)(d.f,{children:[(0,A.jsxs)("div",{...M(),className:"border-2 border-dashed border-gray-300 rounded-lg p-5 h-52 mb-4 cursor-pointer ".concat(q?"bg-gray-100 dark:bg-gray-800":"bg-white dark:bg-gray-700"),children:[(0,A.jsx)("input",{...E()}),q?(0,A.jsx)("p",{children:"Drop the files here..."}):(0,A.jsxs)(A.Fragment,{children:[" ",(0,A.jsx)("p",{className:"mb-2",children:"Drag & drop some files here, or click to select files."}),(0,A.jsxs)("ul",{className:"text-left list-disc ml-7",children:[(0,A.jsx)("li",{children:"images (jpeg, png, jpg, gif, webp & heic)"}),(0,A.jsx)("li",{children:"images must be at least 1920x1080 (FHD/1080p)"}),(0,A.jsx)("li",{children:"max file size: 2MB (per file)"})]}),(0,A.jsx)("p",{className:"mt-2 text-sm text-gray-500"})]})]}),N&&(0,A.jsx)(x.E,{isIndeterminate:!0,size:"xs",mb:4}),B&&(0,A.jsx)(x.E,{value:Q,size:"sm",colorScheme:"blue",mb:4}),(0,A.jsx)("div",{className:"space-y-4",children:s.map((e,o)=>(0,A.jsxs)("div",{className:"p-4 border border-gray-300 rounded-lg",children:[(0,A.jsxs)("div",{className:"flex items-center",children:[e.file.type.startsWith("image/")&&(0,A.jsx)(f.default,{src:URL.createObjectURL(e.file),alt:e.customName,className:"object-cover w-16 h-16 mr-4 rounded",width:200,height:200}),(0,A.jsxs)("div",{className:"flex-1",children:[R===e.originalName?(0,A.jsxs)("div",{className:"flex items-center gap-2",children:[(0,A.jsx)(es.I,{value:p,onChange:W,size:"sm",className:"flex-1"}),(0,A.jsx)(C.h,{"aria-label":"Save name",icon:(0,A.jsx)(er.UgA,{}),size:"sm",colorScheme:"green",title:"Save",onClick:()=>H(o)}),(0,A.jsx)(C.h,{"aria-label":"Cancel",icon:(0,A.jsx)(er.q5L,{}),size:"sm",title:"Cancel",colorScheme:"red",onClick:V})]}):(0,A.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,A.jsx)("p",{className:"font-semibold text-gray-700",children:e.customName}),(0,A.jsxs)("div",{children:[(0,A.jsx)(C.h,{"aria-label":"Edit name",icon:(0,A.jsx)(er.IYd,{className:"text-blue-500"}),size:"sm",title:"Edit File Name",variant:"ghost",onClick:()=>P(e)}),(0,A.jsx)(C.h,{"aria-label":"Remove file",icon:(0,A.jsx)(eK.BFV,{className:"text-red-500"}),size:"sm",title:"Edit file name",variant:"ghost",onClick:()=>n([])})]})]}),(0,A.jsxs)("p",{className:"text-sm text-gray-500",children:[(e.file.size/1024).toFixed(2)," ","KB"]})]})]}),O.includes(e.originalName)&&(0,A.jsxs)(eR.b,{status:"info",mt:2,fontSize:13,children:[(0,A.jsx)(em.z,{}),"This image was converted automatically from HEIC to JPG format"]}),e.dimensions&&!e.dimensions.isFHD&&(0,A.jsxs)("p",{className:"mt-1 text-xs text-red-500",children:["Actual Image Resolution:"," ",e.dimensions.width,"x",e.dimensions.height," (Below 1920x1080 FHD)",(0,A.jsx)("br",{}),"But image can still be uploaded."]})]},e.originalName))})]}),(0,A.jsxs)(g.m,{children:[(0,A.jsx)(w.z,{colorScheme:"blue",mr:3,onClick:a,disabled:B,children:"Close"}),(0,A.jsx)(w.z,{colorScheme:"teal",onClick:Y,isLoading:B,disabled:0===s.length,children:"Submit"})]})]})]})}function ej(e){let{onOpen:o,...a}=e,{pathSelected:s,pathSidebarSelected:l,typeView:n,setPathSelected:r,setTypeView:K,sortBy:c,setSortBy:U,setSearchTerm:F,searchTerm:d}=(0,m.G)(),[g,R]=t.useState(!1),[p,u]=t.useState(""),[x,f]=t.useState(!0),j=t.useRef(null),B=s.split("/").filter(e=>e),{isOpen:b,onOpen:Q,onClose:v}=(0,h.q)(),y=t.useCallback(e=>{F(""),u(""),r(e)},[F,r]),S=t.useCallback(()=>{let{setBypassNavCheck:e}=i(35586).b.getState();e(!0),y(s.replace(/\/[^\/]*$/,"")),setTimeout(()=>e(!1),100)},[s,y]),N=t.useCallback(e=>{let{setBypassNavCheck:o}=i(35586).b.getState();o(!0),y(e),setTimeout(()=>o(!1),100)},[y]);t.useEffect(()=>{x&&f(!1),F("")},[x,F]);let k=()=>{if(p.trim()){F(p.trim()),R(!1);let e=document.createElement("div");e.setAttribute("aria-live","polite"),e.setAttribute("role","status"),e.style.position="absolute",e.style.width="1px",e.style.height="1px",e.style.padding="0",e.style.margin="-1px",e.style.overflow="hidden",e.style.clip="rect(0, 0, 0, 0)",e.style.whiteSpace="nowrap",e.style.border="0",e.textContent="Search results for ".concat(p.trim()),document.body.appendChild(e),setTimeout(()=>document.body.removeChild(e),3e3)}};return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(ef,{isOpen:b,onClose:v}),(0,A.jsxs)("nav",{id:"main-content",className:"flex flex-col justify-between p-4 bg-white shadow-sm dark:bg-gray-900 md:flex-row",tabIndex:-1,children:[(0,A.jsxs)("div",{className:"flex items-center w-full mt-2 md:mt-0",children:[(0,A.jsx)("button",{onClick:S,disabled:s===l,className:"flex-shrink-0 p-2 text-lg rounded-md hover:bg-gray-100 dark:hover:bg-gray-800","aria-label":"Back",children:(0,A.jsx)(eK.Xtt,{className:"w-10 h-10"})}),(0,A.jsx)("div",{className:"w-full ml-2 overflow-x-auto",children:(0,A.jsx)(X.a,{className:"inline-flex items-center min-w-full",separator:(0,A.jsx)(eg.AeI,{className:"mx-1"}),spacing:"1",children:B.map((e,o)=>{let t=o===B.length-1,a=B.slice(0,o+1),s="".concat(a.join("/"),"/");return o>=3?(0,A.jsx)($.g,{isCurrentPage:t,children:(0,A.jsx)(ee.A,{onClick:()=>{let{setBypassNavCheck:e}=i(35586).b.getState();e(!0),N(s),setTimeout(()=>e(!1),100)},href:"#",className:"\n                                                whitespace-nowrap\n                                                ".concat(t?"font-semibold":"hover:underline","\n                                            "),children:e})},e):null})})})]}),(0,A.jsxs)("div",{className:"flex items-center justify-between space-x-2",children:[(0,A.jsxs)("div",{className:"flex items-center gap-2",children:[d&&(0,A.jsxs)(eo.Vp,{size:"lg",rounded:"md",variant:"solid",colorScheme:"blue",className:"py-2",children:[(0,A.jsx)(eo.Sn,{children:d}),(0,A.jsx)(eo.SD,{onClick:()=>{u(""),F(""),setTimeout(()=>{var e;null===(e=document.getElementById("main-content"))||void 0===e||e.focus()},100)}})]}),(0,A.jsxs)(ei.v,{isOpen:g,onClose:()=>R(!1),children:[(0,A.jsx)(eA.j,{as:C.h,icon:(0,A.jsx)(er.jRj,{}),variant:"ghost","aria-label":"Search files",title:"Search files",bg:d?"gray.400":"transparent",className:"border",onClick:()=>{R(!g),g||setTimeout(()=>{var e;null===(e=j.current)||void 0===e||e.focus()},100)}}),(0,A.jsx)(et.q,{children:(0,A.jsxs)("div",{className:"px-5",children:[(0,A.jsx)("div",{children:(0,A.jsxs)(ea.B,{children:[(0,A.jsx)(es.I,{ref:j,placeholder:"Search filename",value:p,onChange:e=>u(e.target.value),onKeyDown:e=>{"Enter"===e.key&&k()},autoFocus:!0}),p&&(0,A.jsx)(el.x,{children:(0,A.jsx)(C.h,{"aria-label":"Clear search",icon:(0,A.jsx)(er.q5L,{}),size:"sm",onClick:()=>{u("")}})})]})}),(0,A.jsxs)("div",{className:"flex justify-between mt-2",children:[(0,A.jsx)(w.z,{colorScheme:"red",size:"sm",onClick:()=>R(!1),children:"Cancel"}),(0,A.jsx)(w.z,{colorScheme:"blue",size:"sm",onClick:k,isDisabled:!p.trim(),children:"Search"})]})]})})]})]}),(0,A.jsxs)(ei.v,{children:[(0,A.jsx)(eA.j,{as:C.h,icon:(0,A.jsx)(er.Ihx,{}),variant:"outline","aria-label":"Sort files",title:"Sort files"}),(0,A.jsx)(et.q,{children:[{value:"name_asc",label:"Name (A-Z)"},{value:"name_desc",label:"Name (Z-A)"},{value:"date_newest",label:"Date (Newest)"},{value:"date_oldest",label:"Date (Oldest)"}].map(e=>(0,A.jsx)(en.s,{onClick:()=>U(e.value),fontWeight:c===e.value?"bold":"normal",children:e.label},e.value))})]}),(0,A.jsxs)("div",{className:"flex p-1 rounded-md bg-gray-50 dark:bg-gray-700 dark:text-gray-50",children:[(0,A.jsx)(C.h,{size:"sm",variant:"ghost","aria-label":"Grid view",onClick:()=>K("grid"),bg:"grid"==n&&"gray.400",icon:(0,A.jsx)(ec.H9n,{className:"w-5 h-5"})}),(0,A.jsx)(C.h,{size:"sm",variant:"ghost","aria-label":"List view",onClick:()=>K("list"),bg:"list"==n&&"gray.400",icon:(0,A.jsx)(ec.Ps6,{className:"w-5 h-5"})})]}),(0,A.jsx)(ed,{}),(0,A.jsxs)(w.z,{onClick:Q,colorScheme:"blue",children:[(0,A.jsx)(er.Yjd,{className:"m-2"}),"Upload"]})]})]})]})}function eB(e){let{path:o,children:t,...a}=e,{pathSidebarSelected:s,setPathSelected:l,setPathSidebarSelected:n}=(0,m.G)();return(0,A.jsx)(p.xu,{as:"a",href:"#",style:{textDecoration:"none"},_focus:{boxShadow:"none"},children:(0,A.jsxs)(eU.k,{align:"center",p:2,m:2,borderRadius:"lg",cursor:"pointer",_hover:{bg:"cyan.500",color:"white"},bg:s==o&&"cyan.400",color:s==o&&"white",...a,textTransform:"capitalize",onClick:()=>{let e=i(35586).b,{inMediaModal:A}=e.getState();e.getState().setBypassNavCheck(!0),n(o),l(o),A||setTimeout(()=>{e.getState().setBypassNavCheck(!1)},1e3)},children:[s==o?(0,A.jsx)(B.MDs,{className:"w-6 h-6 mr-2 text-yellow-400"}):(0,A.jsx)(B.$nz,{className:"w-6 h-6 mr-2 text-yellow-400"}),t]})})}var eb=i(35586);function eQ(e){let{onClose:o,icon:i,children:t,fileManager:a,...s}=e,{inMediaModal:l}=(0,eb.b)();return(0,A.jsx)("aside",{className:"hidden w-64 h-full p-4 shadow-sm bg-gray-50 dark:bg-gray-900 md:block",children:(0,A.jsxs)("div",{className:"flex flex-col h-full",children:[(0,A.jsx)("h1",{className:"mb-2 ml-4 text-2xl font-bold",children:"Media"}),null==a?void 0:a.filter(e=>"folder"==e.type).map(e=>(0,A.jsx)(eB,{path:e.path,children:e.name},e.name))]})})}function ev(){let{isOpen:e,onOpen:o,onClose:s}=(0,h.q)(),{register:n}=(0,a.cI)(),[r,K]=t.useState(null),{data:c}=(0,S.useSession)(),{isModalMedia:U}=(0,m.G)(),{inMediaModal:F}=(0,eb.b)();return t.useEffect(()=>{if(F){let e=setInterval(()=>{let e=i(35586).b,{bypassNavCheck:o}=e.getState();o&&e.getState().setBypassNavCheck(!1)},5e3);return()=>clearInterval(e)}},[F]),t.useEffect(()=>{let e=async()=>{try{var e;let o=((e="/cdn/assets/uploads/UZONEINC",void 0===e)?void 0:e.replace(/^\//,""))+"/",i=await l.listObjects(o);if(i.success&&i.data){let e=i.data.items.filter(e=>"folder"===e.type);K(e)}else console.error("Failed to fetch S3 folders:",i.error),K([])}catch(e){console.error("Failed to fetch S3 folders:",e),K([])}};c&&e()},[c]),(0,A.jsxs)("div",{className:"flex flex-col ".concat(U?"h-full":"h-[93vh]"),children:[(0,A.jsx)(R,{register:n,isOpen:e,onClose:s}),(0,A.jsx)(ej,{onOpen:o}),(0,A.jsxs)("div",{className:"flex flex-1 overflow-hidden",children:[(0,A.jsx)(eQ,{onClose:()=>s,fileManager:r}),(0,A.jsx)("div",{className:"flex-1 overflow-auto",children:(0,A.jsx)("div",{className:"p-2 font-bold",children:(0,A.jsx)(Y,{session:c})})})]})]})}},35586:function(e,o,i){i.d(o,{b:function(){return A}});let A=(0,i(59625).Ue)(e=>({bypassNavCheck:!1,inMediaModal:!1,setBypassNavCheck:o=>e({bypassNavCheck:o}),setInMediaModal:o=>e({inMediaModal:o})}))},25957:function(e,o,i){i.d(o,{G:function(){return a}});var A=i(59625),t=i(89134);let a=(0,A.Ue)()((0,t.tJ)(e=>({pathSelected:"/cdn/assets/uploads/UZONEINC".replace(/^\//,"")+"/",pathSidebarSelected:"/cdn/assets/uploads/UZONEINC".replace(/^\//,"")+"/",pathBack:"",typeView:"grid",triggerUpdate:0,isModalMedia:!1,seletectedImage:"",isOpenMedia:!1,isOpenFeatureImage:!1,focalPoint:{x:0,y:0},isOpenGallery:!1,gallery:[],sortBy:"name_asc",searchTerm:"",setPathSelected:o=>{e({pathSelected:o})},setPathSidebarSelected:o=>e({pathSidebarSelected:o}),setPathBack:o=>e({pathBack:o}),setTypeView:o=>e({typeView:o}),setTriggerUpdate:o=>e({triggerUpdate:o}),setIsModalMedia:()=>e(e=>({isModalMedia:!e.isModalMedia})),setSeletectedImage:o=>e({seletectedImage:o}),openMedia:()=>e({isOpenMedia:!0}),closeMedia:()=>e({isOpenMedia:!1}),openFeatureImage:()=>e({isOpenFeatureImage:!0}),closeFeatureImage:()=>e({isOpenFeatureImage:!1}),setFocalPoint:o=>e({focalPoint:o}),onOpenGallery:()=>e({isOpenGallery:!0}),closeGallery:()=>e({isOpenGallery:!1}),setGallery:o=>e({gallery:o}),setSortBy:o=>e({sortBy:o}),setSearchTerm:o=>e({searchTerm:o})}),{name:"media-storage-uzone"}))},83930:function(e,o,i){i.d(o,{k:function(){return A}});let A=(0,i(59625).Ue)()(e=>({dataPost:"",statusSave:"",isInsertImage:!1,isOpenImage:!1,imageTextEditor:"",setDataPost:o=>e({dataPost:o}),setStatusSave:o=>e({statusSave:o}),setIsInsertImage:o=>e({isInsertImage:o}),onOpenImage:()=>e({isOpenImage:!0}),onCloseImage:()=>e({isOpenImage:!1}),setImageTextEditor:o=>e({imageTextEditor:o})}))}}]);